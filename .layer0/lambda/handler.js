var Ll=Object.create,Ue=Object.defineProperty,Nl=Object.getPrototypeOf,Pi=Object.prototype.hasOwnProperty,Il=Object.getOwnPropertyNames,kl=Object.getOwnPropertyDescriptor,Ri=Object.getOwnPropertySymbols,Cl=Object.prototype.propertyIsEnumerable;var Ai=(e,t,r)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))Pi.call(t,r)&&Ai(e,r,t[r]);if(Ri)for(var r of Ri(t))Cl.call(t,r)&&Ai(e,r,t[r]);return e},qi=e=>Ue(e,"__esModule",{value:!0});var M=(e,t)=>()=>(e&&(t=e(e=0)),t),m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ne=(e,t)=>{for(var r in t)Ue(e,r,{get:t[r],enumerable:!0})},Fl=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Il(t))!Pi.call(e,n)&&n!=="default"&&Ue(e,n,{get:()=>t[n],enumerable:!(r=kl(t,n))||r.enumerable});return e},le=e=>Fl(qi(Ue(e!=null?Ll(Nl(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Rr=m(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.default=Dl;var Ml=jl(require("crypto"));function jl(e){return e&&e.__esModule?e:{default:e}}var Et=new Uint8Array(256),xt=Et.length;function Dl(){return xt>Et.length-16&&(Ml.default.randomFillSync(Et),xt=0),Et.slice(xt,xt+=16)}});var Ti=m(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.default=void 0;var $l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;_t.default=$l});var ze=m(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.default=void 0;var Wl=Bl(Ti());function Bl(e){return e&&e.__esModule?e:{default:e}}function Hl(e){return typeof e=="string"&&Wl.default.test(e)}var Ul=Hl;Ot.default=Ul});var Ve=m(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.default=void 0;var Vl=zl(ze());function zl(e){return e&&e.__esModule?e:{default:e}}var F=[];for(let e=0;e<256;++e)F.push((e+256).toString(16).substr(1));function Gl(e,t=0){let r=(F[e[t+0]]+F[e[t+1]]+F[e[t+2]]+F[e[t+3]]+"-"+F[e[t+4]]+F[e[t+5]]+"-"+F[e[t+6]]+F[e[t+7]]+"-"+F[e[t+8]]+F[e[t+9]]+"-"+F[e[t+10]]+F[e[t+11]]+F[e[t+12]]+F[e[t+13]]+F[e[t+14]]+F[e[t+15]]).toLowerCase();if(!(0,Vl.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Jl=Gl;Pt.default=Jl});var Ii=m(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.default=void 0;var Yl=Li(Rr()),Kl=Li(Ve());function Li(e){return e&&e.__esModule?e:{default:e}}var Ni,Ar,qr=0,Tr=0;function Ql(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||Ni,s=e.clockseq!==void 0?e.clockseq:Ar;if(o==null||s==null){let f=e.random||(e.rng||Yl.default)();o==null&&(o=Ni=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),s==null&&(s=Ar=(f[6]<<8|f[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:Tr+1,l=a-qr+(u-Tr)/1e4;if(l<0&&e.clockseq===void 0&&(s=s+1&16383),(l<0||a>qr)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");qr=a,Tr=u,Ar=s,a+=122192928e5;let c=((a&268435455)*1e4+u)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;let d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let f=0;f<6;++f)i[n+f]=o[f];return t||(0,Kl.default)(i)}var Xl=Ql;Rt.default=Xl});var Lr=m(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.default=void 0;var ef=Zl(ze());function Zl(e){return e&&e.__esModule?e:{default:e}}function tf(e){if(!(0,ef.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var rf=tf;At.default=rf});var Nr=m(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.default=nf;Se.URL=Se.DNS=void 0;var of=ki(Ve()),sf=ki(Lr());function ki(e){return e&&e.__esModule?e:{default:e}}function af(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Ci="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Se.DNS=Ci;var Fi="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Se.URL=Fi;function nf(e,t,r){function n(i,o,s,a){if(typeof i=="string"&&(i=af(i)),typeof o=="string"&&(o=(0,sf.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=u[l];return s}return(0,of.default)(u)}try{n.name=e}catch(i){}return n.DNS=Ci,n.URL=Fi,n}});var Di=m(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.default=void 0;var cf=uf(require("crypto"));function uf(e){return e&&e.__esModule?e:{default:e}}function lf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),cf.default.createHash("md5").update(e).digest()}var ff=lf;qt.default=ff});var Mi=m(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.default=void 0;var df=ji(Nr()),yf=ji(Di());function ji(e){return e&&e.__esModule?e:{default:e}}var pf=(0,df.default)("v3",48,yf.default),mf=pf;Tt.default=mf});var Bi=m(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.default=void 0;var hf=$i(Rr()),gf=$i(Ve());function $i(e){return e&&e.__esModule?e:{default:e}}function vf(e,t,r){e=e||{};let n=e.random||(e.rng||hf.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,gf.default)(n)}var Sf=vf;Lt.default=Sf});var Wi=m(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.default=void 0;var bf=wf(require("crypto"));function wf(e){return e&&e.__esModule?e:{default:e}}function Ef(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),bf.default.createHash("sha1").update(e).digest()}var xf=Ef;Nt.default=xf});var Ui=m(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.default=void 0;var _f=Hi(Nr()),Of=Hi(Wi());function Hi(e){return e&&e.__esModule?e:{default:e}}var Pf=(0,_f.default)("v5",80,Of.default),Rf=Pf;It.default=Rf});var zi=m(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.default=void 0;var Af="00000000-0000-0000-0000-000000000000";kt.default=Af});var Vi=m(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.default=void 0;var Tf=qf(ze());function qf(e){return e&&e.__esModule?e:{default:e}}function Lf(e){if(!(0,Tf.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Nf=Lf;Ct.default=Nf});var Gi=m(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});Object.defineProperty(ee,"v1",{enumerable:!0,get:function(){return If.default}});Object.defineProperty(ee,"v3",{enumerable:!0,get:function(){return kf.default}});Object.defineProperty(ee,"v4",{enumerable:!0,get:function(){return Cf.default}});Object.defineProperty(ee,"v5",{enumerable:!0,get:function(){return Ff.default}});Object.defineProperty(ee,"NIL",{enumerable:!0,get:function(){return Df.default}});Object.defineProperty(ee,"version",{enumerable:!0,get:function(){return jf.default}});Object.defineProperty(ee,"validate",{enumerable:!0,get:function(){return Mf.default}});Object.defineProperty(ee,"stringify",{enumerable:!0,get:function(){return $f.default}});Object.defineProperty(ee,"parse",{enumerable:!0,get:function(){return Bf.default}});var If=fe(Ii()),kf=fe(Mi()),Cf=fe(Bi()),Ff=fe(Ui()),Df=fe(zi()),jf=fe(Vi()),Mf=fe(ze()),$f=fe(Ve()),Bf=fe(Lr());function fe(e){return e&&e.__esModule?e:{default:e}}});var re,aS,uS,Ft,cS,lS,fS,dS,yS,pS,Ir=M(()=>{re=le(Gi()),aS=re.default.v1,uS=re.default.v3,Ft=re.default.v4,cS=re.default.v5,lS=re.default.NIL,fS=re.default.version,dS=re.default.validate,yS=re.default.stringify,pS=re.default.parse});var Ji={};Ne(Ji,{LambdaInvocation:()=>Dt,default:()=>Wf});var kr,Wf,Dt,Cr=M(()=>{Ir();kr=class{constructor(){this._id=Ft().toString();this._spawnedAt=Date.now();this._invocationCounter=0;this._lifetimeDuration=0}get id(){return this._id}get age(){return Date.now()-this._spawnedAt}get invocationCounter(){return this._invocationCounter}get lifetimeDuration(){return this._lifetimeDuration}startInvocation(){++this._invocationCounter}stopInvocation(t){this._lifetimeDuration+=t}},Wf=kr,Dt=class{constructor(t){this._startTime=Date.now();this._isRunning=!1;this._lambda=t,this._stopTime=this._startTime}get lambda(){return this._lambda}get duration(){return this._stopTime-this._startTime}start(){this._isRunning||(this._isRunning=!0,this._lambda.startInvocation())}stop(){this._isRunning&&(this._isRunning=!1,this._stopTime=Date.now(),this._lambda.stopInvocation(this.duration))}}});var Xi=m((hS,Yi)=>{"use strict";Yi.exports=Ki;var{toString:Hf}=Object.prototype,Fr=Symbol("circular-ref-tag"),Dr=Symbol("pino-raw-err-ref"),Qi=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[Dr]},set:function(e){this[Dr]=e}}});Object.defineProperty(Qi,Dr,{writable:!0,value:{}});function Ki(e){if(!(e instanceof Error))return e;e[Fr]=void 0;let t=Object.create(Qi);t.type=Hf.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack;for(let r in e)if(t[r]===void 0){let n=e[r];n instanceof Error?n.hasOwnProperty(Fr)||(t[r]=Ki(n)):t[r]=n}return delete e[Fr],t.raw=e,t}});var ro=m((gS,Zi)=>{"use strict";Zi.exports={mapHttpRequest:Uf,reqSerializer:eo};var jr=Symbol("pino-raw-req-ref"),to=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[jr]},set:function(e){this[jr]=e}}});Object.defineProperty(to,jr,{writable:!0,value:{}});function eo(e){let t=e.info||e.socket,r=Object.create(to);return r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl?(r.url=e.originalUrl,r.query=e.query,r.params=e.params):r.url=e.path||(e.url?e.url.path||e.url:void 0),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function Uf(e){return{req:eo(e)}}});var so=m((vS,no)=>{"use strict";no.exports={mapHttpResponse:zf,resSerializer:io};var Mr=Symbol("pino-raw-res-ref"),oo=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Mr]},set:function(e){this[Mr]=e}}});Object.defineProperty(oo,Mr,{writable:!0,value:{}});function io(e){let t=Object.create(oo);return t.statusCode=e.statusCode,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function zf(e){return{res:io(e)}}});var Br=m((SS,ao)=>{"use strict";var $r=Xi(),jt=ro(),Mt=so();ao.exports={err:$r,mapHttpRequest:jt.mapHttpRequest,mapHttpResponse:Mt.mapHttpResponse,req:jt.reqSerializer,res:Mt.resSerializer,wrapErrorSerializer:function(t){return t===$r?t:function(n){return t($r(n))}},wrapRequestSerializer:function(t){return t===jt.reqSerializer?t:function(n){return t(jt.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===Mt.resSerializer?t:function(n){return t(Mt.resSerializer(n))}}}});var co=m((wS,uo)=>{"use strict";var{createContext:Vf,runInContext:Gf}=require("vm");uo.exports=Jf;function Jf(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(o=>{if(typeof o!="string")throw Error(t());try{if(/ã€‡/.test(o))throw Error();let s=new Proxy({},{get:()=>s,set:()=>{throw Error()}}),a=(o[0]==="["?"":".")+o.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(a)||/\/\*/.test(a))throw Error();Gf(`
          (function () {
            'use strict'
            o${a}
            if ([o${a}].length !== 1) throw Error()
          })()
        `,Vf({o:s,\u3007:null}),{codeGeneration:{strings:!1,wasm:!1}})}catch(s){throw Error(r(o))}})}}});var $t=m((bS,lo)=>{"use strict";lo.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var yo=m((ES,fo)=>{"use strict";var Yf=$t();fo.exports=Kf;function Kf({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,o,s){var a=o.match(Yf).map(c=>c.replace(/'|"|`/g,""));let u=o[0]==="[";a=a.map(c=>c[0]==="["?c.substr(1,c.length-2):c);let l=a.indexOf("*");if(l>-1){let c=a.slice(0,l),d=c.join("."),f=a.slice(l+1,a.length);if(f.indexOf("*")>-1)throw Error("fast-redact \u2013 Only one wildcard per path is supported");let p=f.length>0;r++,t.push({before:c,beforeStr:d,after:f,nested:p})}else i[o]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(o),leadingBracket:u};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var mo=m((xS,po)=>{"use strict";var Qf=$t();po.exports=Xf;function Xf({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:o},s){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${rd(n,t)}
    }
    const { censor, secret } = this
    ${Zf(e,i,o)}
    this.compileRestore()
    ${ed(r>0,i,o)}
    ${td(t)}
  `).bind(s);return t===!1&&(a.restore=u=>s.restore(u)),a}function Zf(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:o,path:s}=e[n],a=o?1:0,u=o?"":".",l=[];for(var c;(c=Qf.exec(n))!==null;){let[,y]=c,{index:h,input:g}=c;h>a&&l.push(g.substring(0,h-(y?0:1)))}var d=l.map(y=>`o${u}${y}`).join(" && ");d.length===0?d+=`o${u}${n} != null`:d+=` && o${u}${n} != null`;let f=`
      switch (true) {
        ${l.reverse().map(y=>`
          case o${u}${y} === censor:
            secret[${i}].circle = ${JSON.stringify(y)}
            break
        `).join(`
`)}
      }
    `,p=r?`val, ${JSON.stringify(s)}`:"val";return`
      if (${d}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${u}${n} = ${t?`censor(${p})`:"censor"}
          ${f}
        }
      }
    `}).join(`
`)}function ed(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function td(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function rd(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Wr=m((_S,ho)=>{"use strict";ho.exports={groupRedact:id,groupRestore:nd,nestedRedact:sd,nestedRestore:od};function nd({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let o=e[i];r[o]=t[i]}}function id(e,t,r,n,i){let o=go(e,t);if(o==null)return{keys:null,values:null,target:null,flat:!0};let s=Object.keys(o),a=s.length,u=t.length,l=i?[...t]:void 0,c=new Array(a);for(var d=0;d<a;d++){let f=s[d];c[d]=o[f],i?(l[u]=f,o[f]=r(o[f],l)):n?o[f]=r(o[f]):o[f]=r}return{keys:s,values:c,target:o,flat:!0}}function od(e){let t=e.length;for(var r=0;r<t;r++){let{key:n,target:i,value:o}=e[r];i[n]=o}}function sd(e,t,r,n,i,o,s){let a=go(t,r);if(a==null)return;let u=Object.keys(a),l=u.length;for(var c=0;c<l;c++){let d=u[c],{value:f,parent:p,exists:y}=ad(a,d,r,n,i,o,s);y===!0&&p!==null&&e.push({key:n[n.length-1],target:p,value:f})}return e}function ud(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ad(e,t,r,n,i,o,s){let a=n.length,u=a-1,l=t;var c=-1,d,f,p,y=null,h=!0;if(p=d=e[t],typeof d!="object")return{value:null,parent:null,exists:h};for(;d!=null&&++c<a;){if(t=n[c],y=p,!(t in d)){h=!1;break}if(p=d[t],f=c!==u?p:o?s?i(p,[...r,l,...n]):i(p):i,d[t]=ud(d,t)&&f===p||f===void 0&&i!==void 0?d[t]:f,d=d[t],typeof d!="object")break}return{value:p,parent:y,exists:h}}function go(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}});var So=m((OS,vo)=>{"use strict";var{groupRestore:cd,nestedRestore:ld}=Wr();vo.exports=fd;function fd({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e).filter(a=>e[a].precensored===!1),i=dd(e,n),o=t>0,s=o?{secret:e,groupRestore:cd,nestedRestore:ld}:{secret:e};this.restore=Function("o",yd(i,n,o)).bind(s)}}function dd(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:o}=e[r],a=n?`o.${n} = secret[${i}].val`:`o${o?"":"."}${r} = secret[${i}].val`,u=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function yd(e,t,r){let n=r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = ${t.length}; i < len; i++) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:"";return`
    const secret = this.secret
    ${e}
    ${n}
    return o
  `}});var bo=m((PS,wo)=>{"use strict";wo.exports=pd;function pd(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:o,nestedRedact:s,wildcards:a,wcLen:u}=e,l=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&l.push({serialize:i}),u>0&&l.push({groupRedact:o,nestedRedact:s,wildcards:a,wcLen:u}),Object.assign(...l)}});var _o=m((RS,Eo)=>{"use strict";var xo=co(),md=yo(),hd=mo(),gd=So(),{groupRedact:vd,nestedRedact:Sd}=Wr(),wd=bo(),bd=$t(),Ed=xo(),Hr=e=>e;Hr.restore=Hr;var xd="[REDACTED]";Ur.rx=bd;Ur.validator=xo;Eo.exports=Ur;function Ur(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:xd,o=typeof i=="function",s=o&&i.length>1;if(t.length===0)return r||Hr;Ed({paths:t,serialize:r,censor:i});let{wildcards:a,wcLen:u,secret:l}=md({paths:t,censor:i}),c=gd({secret:l,wcLen:u}),d="strict"in e?e.strict:!0;return hd({secret:l,wcLen:u,serialize:r,strict:d,isCensorFct:o,censorFctTakesPath:s},wd({secret:l,censor:i,compileRestore:c,serialize:r,groupRedact:vd,nestedRedact:Sd,wildcards:a,wcLen:u}))}});var Ie=m((AS,Oo)=>{"use strict";var _d=Symbol("pino.setLevel"),Od=Symbol("pino.getLevel"),Pd=Symbol("pino.levelVal"),Rd=Symbol("pino.useLevelLabels"),Ad=Symbol("pino.useOnlyCustomLevels"),qd=Symbol("pino.mixin"),Td=Symbol("pino.lsCache"),Ld=Symbol("pino.chindings"),Nd=Symbol("pino.parsedChindings"),Id=Symbol("pino.asJson"),kd=Symbol("pino.write"),Cd=Symbol("pino.redactFmt"),Fd=Symbol("pino.time"),Dd=Symbol("pino.timeSliceIndex"),jd=Symbol("pino.stream"),Md=Symbol("pino.stringify"),$d=Symbol("pino.stringifiers"),Bd=Symbol("pino.end"),Wd=Symbol("pino.formatOpts"),Hd=Symbol("pino.messageKey"),Ud=Symbol("pino.nestedKey"),zd=Symbol("pino.wildcardFirst"),Vd=Symbol.for("pino.serializers"),Gd=Symbol.for("pino.formatters"),Jd=Symbol.for("pino.hooks"),Yd=Symbol.for("pino.metadata");Oo.exports={setLevelSym:_d,getLevelSym:Od,levelValSym:Pd,useLevelLabelsSym:Rd,mixinSym:qd,lsCacheSym:Td,chindingsSym:Ld,parsedChindingsSym:Nd,asJsonSym:Id,writeSym:kd,serializersSym:Vd,redactFmtSym:Cd,timeSym:Fd,timeSliceIndexSym:Dd,streamSym:jd,stringifySym:Md,stringifiersSym:$d,endSym:Bd,formatOptsSym:Wd,messageKeySym:Hd,nestedKeySym:Ud,wildcardFirstSym:zd,needsMetadataGsym:Yd,useOnlyCustomLevelsSym:Ad,formattersSym:Gd,hooksSym:Jd}});var To=m((qS,Po)=>{"use strict";var zr=_o(),{redactFmtSym:Kd,wildcardFirstSym:Bt}=Ie(),{rx:Vr,validator:Qd}=zr,Ro=Qd({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),Ao="[Redacted]",qo=!1;function Zd(e,t){let{paths:r,censor:n}=Xd(e),i=r.reduce((a,u)=>{Vr.lastIndex=0;let l=Vr.exec(u),c=Vr.exec(u),d=l[1]!==void 0?l[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):l[0];if(d==="*"&&(d=Bt),c===null)return a[d]=null,a;if(a[d]===null)return a;let{index:f}=c,p=`${u.substr(f,u.length-1)}`;return a[d]=a[d]||[],d!==Bt&&a[d].length===0&&a[d].push(...a[Bt]||[]),d===Bt&&Object.keys(a).forEach(function(y){a[y]&&a[y].push(p)}),a[d].push(p),a},{}),o={[Kd]:zr({paths:r,censor:n,serialize:t,strict:qo})},s=(...a)=>typeof n=="function"?t(n(...a)):t(n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((a,u)=>{if(i[u]===null)a[u]=l=>s(l,[u]);else{let l=typeof n=="function"?(c,d)=>n(c,[u,...d]):n;a[u]=zr({paths:i[u],censor:l,serialize:t,strict:qo})}return a},o)}function Xd(e){if(Array.isArray(e))return e={paths:e,censor:Ao},Ro(e),e;let{paths:t,censor:r=Ao,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),Ro({paths:t,censor:r}),{paths:t,censor:r}}Po.exports=Zd});var No=m((TS,Lo)=>{"use strict";var ey=()=>"",ty=()=>`,"time":${Date.now()}`,ry=()=>`,"time":${Math.round(Date.now()/1e3)}`,ny=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;Lo.exports={nullTime:ey,epochTime:ty,unixTime:ry,isoTime:ny}});var Wt=m((LS,Io)=>{"use strict";function iy(e){return e|0,e}Io.exports=iy});var ko=m((NS,Gr)=>{"use strict";if(typeof SharedArrayBuffer!="undefined"&&typeof Atomics!="undefined"){let t=function(r){if((r>0&&r<Infinity)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));Gr.exports=t}else{let e=function(t){if((t>0&&t<Infinity)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};Gr.exports=e}});var Kr=m((IS,Co)=>{"use strict";var ne=require("fs"),oy=require("events"),sy=Wt(),ay=require("util").inherits,Jr=100,Fo=ko(),Yr=16*1024*1024;function Do(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(n,i){if(n){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",n)}):t.emit("error",n);return}if(t.fd=i,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),t._reopening)return;let o=t._buf.length;o>0&&o>t.minLength&&!t.destroyed&&ke(t)}if(t.sync)try{let n=ne.openSync(e,"a");r(null,n)}catch(n){throw r(n),n}else ne.open(e,"a",r)}function ie(e){if(!(this instanceof ie))return new ie(e);let{fd:t,dest:r,minLength:n,sync:i}=e||{};if(t=t||r,this._buf="",this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this.file=null,this.destroyed=!1,this.sync=i||!1,this.minLength=n||0,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")Do(t,this);else throw new Error("SonicBoom supports only file descriptors and files");this.release=(o,s)=>{if(o){if(o.code==="EAGAIN")if(this.sync)try{Fo(Jr),this.release(void 0,0)}catch(u){this.release(u)}else setTimeout(()=>{ne.write(this.fd,this._writingBuf,"utf8",this.release)},Jr);else this._buf=this._writingBuf+this._buf,this._writingBuf="",this._writing=!1,this.emit("error",o);return}if(this._writingBuf.length!==s)if(this._writingBuf=this._writingBuf.slice(s),this.sync)try{do s=ne.writeSync(this.fd,this._writingBuf,"utf8"),this._writingBuf=this._writingBuf.slice(s);while(this._writingBuf.length!==0)}catch(u){this.release(u);return}else{ne.write(this.fd,this._writingBuf,"utf8",this.release);return}if(this._writingBuf="",this.destroyed)return;let a=this._buf.length;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):a>0&&a>this.minLength?ke(this):this._ending?a>0?ke(this):(this._writing=!1,Ht(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(uy,this)):this.emit("drain"))},this.on("newListener",function(o){o==="drain"&&(this._asyncDrainScheduled=!1)})}function uy(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}ay(ie,oy);ie.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");this._buf+=e;let t=this._buf.length;return!this._writing&&t>this.minLength&&ke(this),t<16384};ie.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||ke(this)};ie.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&ne.close(t,r=>{if(r)return this.emit("error",r)})}),Do(e||this.file,this)};ie.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}if(!this._ending){if(this._ending=!0,!this._writing&&this._buf.length>0&&this.fd>=0){ke(this);return}this._writing||Ht(this)}};ie.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");for(;this._buf.length>0;)try{ne.writeSync(this.fd,this._buf,"utf8"),this._buf=""}catch(e){if(e.code!=="EAGAIN")throw e;Fo(Jr)}};ie.prototype.destroy=function(){this.destroyed||Ht(this)};function ke(e){e._writing=!0;let t=e._buf,r=e.release;if(t.length>Yr?(t=t.slice(0,Yr),e._buf=e._buf.slice(Yr)):e._buf="",sy(t),e._writingBuf=t,e.sync)try{let n=ne.writeSync(e.fd,t,"utf8");r(null,n)}catch(n){r(n)}else ne.write(e.fd,t,"utf8",r)}function Ht(e){if(e.fd===-1){e.once("ready",Ht.bind(null,e));return}ne.close(e.fd,t=>{if(t){e.emit("error",t);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}),e.destroyed=!0,e._buf=""}Co.exports=ie});var Mo=m((kS,jo)=>{"use strict";function cy(e){try{return JSON.stringify(e)}catch(t){return'"[Circular]"'}}jo.exports=ly;function ly(e,t,r){var n=r&&r.stringify||cy,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var s=new Array(o);s[0]=n(e);for(var a=1;a<o;a++)s[a]=n(t[a]);return s.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var l="",c="",d=1-i,f=-1,p=e&&e.length||0,y=0;y<p;){if(e.charCodeAt(y)===37&&y+1<p){switch(f=f>-1?f:0,e.charCodeAt(y+1)){case 100:if(d>=u||(f<y&&(c+=e.slice(f,y)),t[d]==null))break;c+=Number(t[d]),f=y=y+2;break;case 79:case 111:case 106:if(d>=u||(f<y&&(c+=e.slice(f,y)),t[d]===void 0))break;var h=typeof t[d];if(h==="string"){c+="'"+t[d]+"'",f=y+2,y++;break}if(h==="function"){c+=t[d].name||"<anonymous>",f=y+2,y++;break}c+=n(t[d]),f=y+2,y++;break;case 115:if(d>=u)break;f<y&&(c+=e.slice(f,y)),c+=String(t[d]),f=y+2,y++;break;case 37:f<y&&(c+=e.slice(f,y)),c+="%",f=y+2,y++;break}++d}++y}return f===-1?e:(f<p&&(c+=e.slice(f)),c)}});var Ho=m((CS,$o)=>{$o.exports=Ge;Ge.default=Ge;Ge.stable=Bo;Ge.stableStringify=Bo;var de=[],ye=[];function Ge(e,t,r){Qr(e,"",[],void 0);var n;for(ye.length===0?n=JSON.stringify(e,t,r):n=JSON.stringify(e,Wo(t),r);de.length!==0;){var i=de.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return n}function Qr(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var o=Object.getOwnPropertyDescriptor(n,t);o.get!==void 0?o.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),de.push([n,t,e,o])):ye.push([e,t]):(n[t]="[Circular]",de.push([n,t,e]));return}if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)Qr(e[i],i,r,e);else{var s=Object.keys(e);for(i=0;i<s.length;i++){var a=s[i];Qr(e[a],a,r,e)}}r.pop()}}function fy(e,t){return e<t?-1:e>t?1:0}function Bo(e,t,r){var n=Xr(e,"",[],void 0)||e,i;for(ye.length===0?i=JSON.stringify(n,t,r):i=JSON.stringify(n,Wo(t),r);de.length!==0;){var o=de.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return i}function Xr(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var o=Object.getOwnPropertyDescriptor(n,t);o.get!==void 0?o.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),de.push([n,t,e,o])):ye.push([e,t]):(n[t]="[Circular]",de.push([n,t,e]));return}if(typeof e.toJSON=="function")return;if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)Xr(e[i],i,r,e);else{var s={},a=Object.keys(e).sort(fy);for(i=0;i<a.length;i++){var u=a[i];Xr(e[u],u,r,e),s[u]=e[u]}if(n!==void 0)de.push([n,t,e]),n[t]=s;else return s}r.pop()}}function Wo(e){return e=e!==void 0?e:function(t,r){return r},function(t,r){if(ye.length>0)for(var n=0;n<ye.length;n++){var i=ye[n];if(i[1]===t&&i[0]===r){r="[Circular]",ye.splice(n,1);break}}return e.call(this,t,r)}}});var zt=m((FS,Uo)=>{"use strict";var zo=Mo(),{mapHttpRequest:dy,mapHttpResponse:yy}=Br(),Vo=Kr(),py=Ho(),{lsCacheSym:my,chindingsSym:Zr,parsedChindingsSym:en,writeSym:Go,serializersSym:tn,formatOptsSym:Jo,endSym:hy,stringifiersSym:rn,stringifySym:Yo,wildcardFirstSym:Ko,needsMetadataGsym:Qo,redactFmtSym:gy,streamSym:vy,nestedKeySym:Xo,formattersSym:nn,messageKeySym:Zo}=Ie();function Je(){}function Sy(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let o=n;n!==null&&(n.method&&n.headers&&n.socket?n=dy(n):typeof n.setHeader=="function"&&(n=yy(n))),this[Xo]&&(n={[this[Xo]]:n});let s;o===null&&i.length===0?s=[null]:(o=i.shift(),s=i),this[Go](n,zo(o,s,this[Jo]),e)}else this[Go](null,zo(n,i,this[Jo]),e)}}function wy(e){let t="",r=0,n=!1,i=255,o=e.length;if(o>100)return JSON.stringify(e);for(var s=0;s<o&&i>=32;s++)i=e.charCodeAt(s),(i===34||i===92)&&(t+=e.slice(r,s)+"\\",r=s,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function by(e,t,r,n){let i=this[Yo],o=this[rn],s=this[hy],a=this[Zr],u=this[tn],l=this[nn],c=this[Zo],d=this[my][r]+n;d=d+a;let f,p=e.hasOwnProperty===void 0;l.log&&(e=l.log(e)),t!==void 0&&(e[c]=t);let y=o[Ko];for(let h in e)if(f=e[h],(p||e.hasOwnProperty(h))&&f!==void 0){f=u[h]?u[h](f):f;let g=o[h]||y;switch(typeof f){case"undefined":case"function":continue;case"number":Number.isFinite(f)===!1&&(f=null);case"boolean":g&&(f=g(f));break;case"string":f=(g||wy)(f);break;default:f=(g||i)(f)}if(f===void 0)continue;d+=',"'+h+'":'+f}return d+s}function Ey(e,t){let r,n=e[Zr],i=e[Yo],o=e[rn],s=o[Ko],a=e[tn];t=e[nn].bindings(t);for(let l in t)if(r=t[l],(l!=="level"&&l!=="serializers"&&l!=="formatters"&&l!=="customLevels"&&t.hasOwnProperty(l)&&r!==void 0)===!0){if(r=a[l]?a[l](r):r,r=(o[l]||s||i)(r),r===void 0)continue;n+=',"'+l+'":'+r}return n}function es(e,t,r,n){if(t&&typeof t=="function")return t=t.bind(n),on(t(e),r,e);try{let i=require("pino-pretty");return i.asMetaWrapper=on,on(i(e),r,e)}catch(i){throw Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately")}}function on(e,t,r){r=Object.assign({suppressFlushSyncWarning:!1},r);let n=!1;return{[Qo]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){r.suppressFlushSyncWarning||n||(n=!0,ts(t,this),t.write(e(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){let i=this.lastLogger,o=null;return i?(i.hasOwnProperty(en)?o=i[en]:(o=JSON.parse("{"+i[Zr].substr(1)+"}"),i[en]=o),o):null},write(i){let o=this.lastLogger,s=this.chindings(),a=this.lastTime;a.match(/^\d+/)?a=parseInt(a):a=a.slice(1,-1);let u=this.lastObj,l=this.lastMsg,c=null,d=o[nn],f=d.log?d.log(u):u,p=o[Zo];l&&f&&!f.hasOwnProperty(p)&&(f[p]=l);let y=Object.assign({level:this.lastLevel,time:a},f,c),h=o[tn],g=Object.keys(h);for(var S=0;S<g.length;S++){let O=g[S];y[O]!==void 0&&(y[O]=h[O](y[O]))}for(let O in s)y.hasOwnProperty(O)||(y[O]=s[O]);let A=o[rn][gy],j=e(typeof A=="function"?A(y):y);j!==void 0&&(ts(t,this),t.write(j))}}}function xy(e){return e.write!==e.constructor.prototype.write}function Ut(e){let t=new Vo(e);return t.on("error",r),t;function r(n){if(n.code==="EPIPE"){t.write=Je,t.end=Je,t.flushSync=Je,t.destroy=Je;return}t.removeListener("error",r),t.emit("error",n)}}function _y(e){return function(r,n={},i){if(typeof n=="string"?(i=Ut({dest:n,sync:!0}),n={}):typeof i=="string"?i=Ut({dest:i,sync:!0}):(n instanceof Vo||n.writable||n._writableState)&&(i=n,n=null),n=Object.assign({},e,n),"extreme"in n)throw Error("The extreme option has been removed, use pino.destination({ sync: false }) instead");if("onTerminated"in n)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in n&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),n.levelKey=n.changeLevelName,delete n.changeLevelName);let{enabled:o,prettyPrint:s,prettifier:a,messageKey:u}=n;if(o===!1&&(n.level="silent"),i=i||process.stdout,i===process.stdout&&i.fd>=0&&!xy(i)&&(i=Ut({fd:i.fd,sync:!0})),s){let l=Object.assign({messageKey:u},s);i=es(l,a,i,r)}return{opts:n,stream:i}}}function Oy(e,t){if(typeof e=="undefined"||typeof e.child!="function")throw Error("expected a pino logger instance");let r=typeof t!="undefined";if(r&&typeof t!="function")throw Error("if supplied, the handler parameter should be a function");let n=e[vy];if(typeof n.flushSync!="function")throw Error("final requires a stream that has a flushSync method, such as pino.destination");let i=new Proxy(e,{get:(o,s)=>s in o.levels.values?(...a)=>{o[s](...a),n.flushSync()}:o[s]});return r?(o=null,...s)=>{try{n.flushSync()}catch(a){}return t(o,i,...s)}:i}function Py(e){try{return JSON.stringify(e)}catch(t){return py(e)}}function Ry(e,t,r){return{level:e,bindings:t,log:r}}function ts(e,t){e[Qo]===!0&&(e.lastLevel=t.lastLevel,e.lastMsg=t.lastMsg,e.lastObj=t.lastObj,e.lastTime=t.lastTime,e.lastLogger=t.lastLogger)}Uo.exports={noop:Je,buildSafeSonicBoom:Ut,getPrettyStream:es,asChindings:Ey,asJson:by,genLog:Sy,createArgsNormalizer:_y,final:Oy,stringify:Py,buildFormatters:Ry}});var un=m((DS,rs)=>{"use strict";var Ay=Wt(),{lsCacheSym:qy,levelValSym:sn,useOnlyCustomLevelsSym:Ty,streamSym:Ly,formattersSym:Ny,hooksSym:Iy}=Ie(),{noop:ky,genLog:we}=zt(),oe={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},ns={fatal:e=>{let t=we(oe.fatal,e);return function(...r){let n=this[Ly];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch(i){}}},error:e=>we(oe.error,e),warn:e=>we(oe.warn,e),info:e=>we(oe.info,e),debug:e=>we(oe.debug,e),trace:e=>we(oe.trace,e)},an=Object.keys(oe).reduce((e,t)=>(e[oe[t]]=t,e),{}),Cy=Object.keys(an).reduce((e,t)=>(e[t]=Ay('{"level":'+Number(t)),e),{});function Fy(e){let t=e[Ny].level,{labels:r}=e.levels,n={};for(let i in r){let o=t(r[i],Number(i));n[i]=JSON.stringify(o).slice(0,-1)}return e[qy]=n,e}function Dy(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function jy(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[sn],i=this[sn]=r[e],o=this[Ty],s=this[Iy].logMethod;for(let a in r){if(i>r[a]){this[a]=ky;continue}this[a]=Dy(a,o)?ns[a](s):we(r[a],s)}this.emit("level-change",e,i,t[n],n)}function My(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function $y(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[sn]}function By(e=null,t=!1){let r=e?Object.keys(e).reduce((o,s)=>(o[e[s]]=s,o),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:an,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:Infinity}}),t?null:oe,e);return{labels:n,values:i}}function Wy(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(o=>t[o]),r?[]:Object.keys(an).map(o=>+o),Infinity).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:Infinity}}),r?null:oe,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function Hy(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}rs.exports={initialLsCache:Cy,genLsCache:Fy,levelMethods:ns,getLevel:My,setLevel:jy,isLevelEnabled:$y,mappings:By,assertNoLevelCollisions:Hy,assertDefaultLevelFound:Wy}});var os=m((jS,is)=>{is.exports={name:"pino",version:"6.11.2",description:"super fast, all natural json logger",main:"pino.js",browser:"./browser.js",files:["pino.js","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],scripts:{docs:"docsify serve","browser-test":"airtap --local 8080 test/browser*test.js",lint:"eslint .",test:"npm run lint && tap --100 test/*test.js test/*/*test.js","test-ci":"npm run lint && tap test/*test.js test/*/*test.js --coverage-report=lcovonly","cov-ui":"tap --coverage-report=html test/*test.js test/*/*test.js",bench:"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-object":"node benchmarks/utils/runbench object","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-formatters":"node benchmarks/utils/runbench formatters","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},bin:{pino:"./bin.js"},precommit:"test",repository:{type:"git",url:"git+https://github.com/pinojs/pino.git"},keywords:["fast","logger","stream","json"],author:"Matteo Collina <hello@matteocollina.com>",contributors:["David Mark Clements <huperekchuno@googlemail.com>","James Sumners <james.sumners@gmail.com>","Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)"],license:"MIT",bugs:{url:"https://github.com/pinojs/pino/issues"},homepage:"http://getpino.io",devDependencies:{airtap:"4.0.3",benchmark:"^2.1.4",bole:"^4.0.0",bunyan:"^1.8.14","docsify-cli":"^4.4.1",eslint:"^7.17.0","eslint-config-standard":"^16.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1",execa:"^5.0.0",fastbench:"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1",log:"^6.0.0",loglevel:"^1.6.7","pino-pretty":"^4.1.0","pre-commit":"^1.2.2",proxyquire:"^2.1.3",pump:"^3.0.0",semver:"^7.0.0",split2:"^3.1.1",steed:"^1.1.3","strip-ansi":"^6.0.0",tap:"^14.10.8",tape:"^5.0.0",through2:"^4.0.0",winston:"^3.3.3"},dependencies:{"fast-redact":"^3.0.0","fast-safe-stringify":"^2.0.7",flatstr:"^1.0.12","pino-std-serializers":"^3.1.0","quick-format-unescaped":"4.0.1","sonic-boom":"^1.0.2"},_resolved:"https://registry.npmjs.org/pino/-/pino-6.11.2.tgz",_integrity:"sha512-bmzxwbrIPxQUlAuMkF4PWVErUGERU4z37HazlhflKFg08crsNE3fACGN6gPwg5xtKOK47Ux5cZm8YCuLV4wWJg==",_from:"pino@6.11.2"}});var cn=m((MS,ss)=>{"use strict";var{version:Uy}=os();ss.exports={version:Uy}});var ms=m((BS,as)=>{"use strict";var{EventEmitter:zy}=require("events"),Vy=Kr(),Gy=Wt(),{lsCacheSym:Jy,levelValSym:Yy,setLevelSym:ln,getLevelSym:us,chindingsSym:fn,parsedChindingsSym:Ky,mixinSym:Qy,asJsonSym:cs,writeSym:Xy,timeSym:Zy,timeSliceIndexSym:ep,streamSym:ls,serializersSym:be,formattersSym:dn,useOnlyCustomLevelsSym:tp,needsMetadataGsym:rp}=Ie(),{getLevel:np,setLevel:ip,isLevelEnabled:op,mappings:sp,initialLsCache:ap,genLsCache:up,assertNoLevelCollisions:cp}=un(),{asChindings:fs,asJson:lp,buildFormatters:ds}=zt(),{version:fp}=cn(),dp=class{},ys={constructor:dp,child:yp,bindings:pp,setBindings:mp,flush:gp,isLevelEnabled:op,version:fp,get level(){return this[us]()},set level(e){this[ln](e)},get levelVal(){return this[Yy]},set levelVal(e){throw Error("levelVal is read-only")},[Jy]:ap,[Xy]:hp,[cs]:lp,[us]:np,[ln]:ip};Object.setPrototypeOf(ys,zy.prototype);as.exports=function(){return Object.create(ys)};var ps=e=>e;function yp(e){if(!e)throw Error("missing bindings for child Pino");let t=this[be],r=this[dn],n=Object.create(this);if(e.hasOwnProperty("serializers")===!0){n[be]=Object.create(null);for(let l in t)n[be][l]=t[l];let a=Object.getOwnPropertySymbols(t);for(var i=0;i<a.length;i++){let l=a[i];n[be][l]=t[l]}for(let l in e.serializers)n[be][l]=e.serializers[l];let u=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<u.length;o++){let l=u[o];n[be][l]=e.serializers[l]}}else n[be]=t;if(e.hasOwnProperty("formatters")){let{level:a,bindings:u,log:l}=e.formatters;n[dn]=ds(a||r.level,u||ps,l||r.log)}else n[dn]=ds(r.level,ps,r.log);e.hasOwnProperty("customLevels")===!0&&(cp(this.levels,e.customLevels),n.levels=sp(e.customLevels,n[tp]),up(n)),n[fn]=fs(n,e);let s=e.level||this.level;return n[ln](s),n}function pp(){let t=`{${this[fn].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function mp(e){let t=fs(this,e);this[fn]=t,delete this[Ky]}function hp(e,t,r){let n=this[Zy](),i=this[Qy],o=e instanceof Error,s;e==null?s=i?i({}):{}:(s=Object.assign(i?i(e):{},e),!t&&o&&(t=e.message),o&&(s.stack=e.stack,s.type||(s.type="Error")));let a=this[cs](s,t,r,n),u=this[ls];u[rp]===!0&&(u.lastLevel=r,u.lastObj=s,u.lastMsg=t,u.lastTime=n.slice(this[ep]),u.lastLogger=this),u instanceof Vy?u.write(a):u.write(Gy(a))}function gp(){let e=this[ls];"flush"in e&&e.flush()}});var Ps=m((WS,Y)=>{"use strict";var vp=require("os"),hs=Br(),Sp=To(),gs=No(),wp=ms(),vs=Ie(),{assertDefaultLevelFound:bp,mappings:Ss,genLsCache:Ep}=un(),{createArgsNormalizer:xp,asChindings:_p,final:Op,stringify:Vt,buildSafeSonicBoom:yn,buildFormatters:Pp,noop:Rp}=zt(),{version:Ap}=cn(),{chindingsSym:ws,redactFmtSym:qp,serializersSym:bs,timeSym:Tp,timeSliceIndexSym:Lp,streamSym:Np,stringifySym:Es,stringifiersSym:xs,setLevelSym:Ip,endSym:kp,formatOptsSym:Cp,messageKeySym:Fp,nestedKeySym:Dp,mixinSym:jp,useOnlyCustomLevelsSym:Mp,formattersSym:_s,hooksSym:$p}=vs,{epochTime:Os,nullTime:Bp}=gs,{pid:Wp}=process,Hp=vp.hostname(),Up=hs.err,pn={level:"info",messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:Wp,hostname:Hp},serializers:Object.assign(Object.create(null),{err:Up}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:Os,name:void 0,redact:null,customLevels:null,levelKey:void 0,useOnlyCustomLevels:!1},zp=xp(pn),Vp=Object.assign(Object.create(null),hs);function mn(...e){let t={},{opts:r,stream:n}=zp(t,...e),{redact:i,crlf:o,serializers:s,timestamp:a,messageKey:u,nestedKey:l,base:c,name:d,level:f,customLevels:p,useLevelLabels:y,changeLevelName:h,levelKey:g,mixin:S,useOnlyCustomLevels:R,formatters:A,hooks:j}=r,O=Pp(A.level,A.bindings,A.log);y&&!(h||g)?(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),O.level=Gp):(h||g)&&!y?(process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),O.level=Jp(h||g)):(h||g)&&y&&(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),O.level=Yp(h||g)),s[Symbol.for("pino.*")]&&(process.emitWarning("The pino.* serializer is deprecated, use the formatters.log options instead","Warning","PINODEP003"),O.log=s[Symbol.for("pino.*")]),O.bindings||(O.bindings=pn.formatters.bindings),O.level||(O.level=pn.formatters.level);let L=i?Sp(i,Vt):{},v=i?{stringify:L[qp]}:{stringify:Vt},E="}"+(o?`\r
`:`
`),w=_p.bind(null,{[ws]:"",[bs]:s,[xs]:L,[Es]:Vt,[_s]:O}),x="";c!==null&&(d===void 0?x=w(c):x=w(Object.assign({},c,{name:d})));let q=a instanceof Function?a:a?Os:Bp,I=q().indexOf(":")+1;if(R&&!p)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(S&&typeof S!="function")throw Error(`Unknown mixin type "${typeof S}" - expected "function"`);bp(f,p,R);let T=Ss(p,R);return Object.assign(t,{levels:T,[Mp]:R,[Np]:n,[Tp]:q,[Lp]:I,[Es]:Vt,[xs]:L,[kp]:E,[Cp]:v,[Fp]:u,[Dp]:l,[bs]:s,[jp]:S,[ws]:x,[_s]:O,[$p]:j,silent:Rp}),Object.setPrototypeOf(t,wp()),Ep(t),t[Ip](f),t}function Gp(e,t){return{level:e}}function Jp(e){return function(t,r){return{[e]:r}}}function Yp(e){return function(t,r){return{[e]:t}}}Y.exports=mn;Y.exports.extreme=(e=process.stdout.fd)=>(process.emitWarning("The pino.extreme() option is deprecated and will be removed in v7. Use pino.destination({ sync: false }) instead.",{code:"extreme_deprecation"}),yn({dest:e,minLength:4096,sync:!1}));Y.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=e.dest||process.stdout.fd,yn(e)):yn({dest:e,minLength:0,sync:!0});Y.exports.final=Op;Y.exports.levels=Ss();Y.exports.stdSerializers=Vp;Y.exports.stdTimeFunctions=Object.assign({},gs);Y.exports.symbols=vs;Y.exports.version=Ap;Y.exports.default=mn;Y.exports.pino=mn});function Xp(e,t){e.length>=2?t.apply(this,[e.map(r=>typeof r=="string"?"%s":"%j").join(" "),...e]):t.apply(this,e)}var Gt,Kp,Qp,te,Ye,se,hn,Rs=M(()=>{Gt={awsTag:"userLogs"},Kp=require("util"),Qp=Ps(),te={assert:console.assert,debug:console.debug,dir:console.dir,error:console.error,info:console.info,log:console.log,time:console.time,timeEnd:console.timeEnd,timeLog:console.timeLog,trace:console.trace,warn:console.warn},Ye={};se=class{static _assert(t,...r){t||console.info(...r)}static _dir(...t){console.info(Kp.inspect(...t))}static _time(t){Ye[t]=Date.now()}static _timeEnd(t){se._timeLog(t)}static _timeLog(t,...r){if(!Ye[t]){console.warn(`Warning: No such label '${t}' for console.timeEnd()`);return}let n=Date.now()-Ye[t];Ye[t]=Date.now(),console.info(`${t}: ${n}ms`,...r)}static enable({clientIp:t,requestId:r}={}){Ye={};let n=Qp({base:Gt,timestamp:!1,hooks:{logMethod:Xp}});t&&(n=n.child({clientIp:t})),r&&(n=n.child({requestId:r})),console.assert=se._assert,console.debug=n.debug.bind(n),console.dir=se._dir,console.error=n.error.bind(n),console.info=n.info.bind(n),console.log=n.info.bind(n),console.time=se._time,console.timeEnd=se._timeEnd,console.timeLog=se._timeLog,console.trace=n.trace.bind(n),console.warn=n.warn.bind(n)}static disable(){console.assert=te.assert,console.debug=te.debug,console.dir=te.dir,console.error=te.error,console.info=te.info,console.log=te.log,console.time=te.time,console.timeEnd=te.timeEnd,console.timeLog=te.timeLog,console.trace=te.trace,console.warn=te.warn}},hn=se});var Jt,As,Yt,qs,U,zS,Ke=M(()=>{Jt={config:"LAYER0_CONFIG",deploymentType:"LAYER0_DEPLOYMENT_TYPE",versionOverride:"LAYER0_VERSION_OVERRIDE"},As="AWS",Yt={js:"__js__",static:"__static__",permanentStatic:"__permanent_static__",imageOptimizer:"__image_optimizer__"},qs="127.0.0.1",U={authorization:"authorization",acceptEncoding:"accept-encoding",cacheControl:"cache-control",contentEncoding:"content-encoding",contentLength:"content-length",contentType:"content-type",cookie:"cookie",host:"host",location:"location",serverTiming:"server-timing",setCookie:"set-cookie",userAgent:"user-agent",vary:"vary",xForwardedFor:"x-forwarded-for",xRequestId:"x-request-id",xSwCacheControl:"x-sw-cache-control",x0Browser:"x-0-browser",x0CacheControl:"x-0-cache-control",x0CachingStatus:"x-0-caching-status",x0ClientIp:"x-0-client-ip",x0Components:"x-0-components",x0Destination:"x-0-destination",x0Device:"x-0-device",x0DeviceIsBot:"x-0-device-is-bot",x0GeoCity:"x-0-geo-city",x0GeoCountryCode:"x-0-geo-country-code",x0GeoLatitude:"x-0-geo-latitude",x0GeoLongitude:"x-0-geo-longitude",x0GeoPostalCode:"x-0-geo-postal-code",x0MatchedRoutes:"x-0-matched-routes",x0Protocol:"x-0-protocol",x0Route:"x-0-route",x0Status:"x-0-status",x0SurrogateKey:"x-0-surrogate-key",x0T:"x-0-t",x0UserT:"x-0-user-t",x0Vendor:"x-0-vendor",x0Version:"x-0-version"},zS=new Set(["get","head"])});var Ts={};Ne(Ts,{isCloud:()=>Ls,isLayer0RunDev:()=>Zp,isLocal:()=>gn,isProductionBuild:()=>Ns});function Ls(){return process.env[Jt.deploymentType]===As}function gn(){return process.env.LAYER0_LOCAL==="true"}function Ns(){return process.env.NODE_ENV==="production"}function Zp(){return!Ls()&&!Ns()}var vn=M(()=>{Ke()});var Is={};Ne(Is,{default:()=>Xt,logDownstreamRequestInfo:()=>wn,logDownstreamResponseInfo:()=>bn,logUpstreamRequestInfo:()=>cm,logUpstreamResponseBodyInfo:()=>fm,logUpstreamResponseInfo:()=>lm});function nm(e){return e.indexOf(rm)>=0}function Qe(e,t){try{process.env.LAYER0_HTTP_REQUEST_LOGGING==="1"&&(Kt.stdoutWrite.apply(process.stdout,[JSON.stringify(C(C({level:t},Sn),{data:e}))]),Kt.stdoutWrite.apply(process.stdout,[`
`]))}catch(r){console.error(`Error while logging HTTP request info at level ${t}: ${r&&r.message}`)}}function wn(e){return Qe(e,im)}function bn(e){return Qe(e,om)}function cm(e){return Qe(e,sm)}function lm(e){return Qe(e,am)}function fm(e){return Qe(e,um)}function Cs(e,t){let r=e.write;e.write=function(n,...i){let o;return typeof n=="object"?o=Buffer.from(n).toString():o=n,n&&!nm(o)&&(n=JSON.stringify(C(C({},t),{msg:o}))+`
`),r.apply(e,[n,...i])}}var ks,Kt,em,tm,Qt,rm,im,om,sm,am,um,Sn,dm,Xt,En=M(()=>{Rs();ks=(vn(),Ts),Kt={stdoutWrite:process.stdout.write,stderrWrite:process.stderr.write},em=50,tm=30,Qt=0,rm=JSON.stringify(Gt).replace("{","").replace("}","");im=100,om=101,sm=102,am=103,um=104,Sn={};dm={enable:({clientIp:e,requestId:t}={})=>{if(!!ks.isCloud()){if(Qt===0){let r=Gt;e&&(r=C(C({},r),{clientIp:e})),t&&(r=C(C({},r),{requestId:t})),Sn=r,Cs(process.stdout,C({level:tm},r)),Cs(process.stderr,C({level:em},r)),hn.enable({clientIp:e,requestId:t})}Qt++}},disable:()=>{!ks.isCloud()||(Qt--,Qt===0&&(process.stdout.write=Kt.stdoutWrite,process.stderr.write=Kt.stderrWrite,Sn={},hn.disable()))}},Xt=dm});var Fs={};Ne(Fs,{default:()=>Xe});function xn(e){return Buffer.from(e).toString("base64")}function pm(e){if(!e)return;let t="content-encoding",r=e[t];if(!r){for(let n of Object.keys(e))if(n.toLowerCase()===t){r=e[n];break}}return Array.isArray(r)&&(r.length?r=r[0]:r=void 0),r}function Xe(e,t){try{if(!e||e.length===0)return{};let r;if(typeof e=="string")r=Buffer.from(e,"base64");else if(Buffer.isBuffer(e))r=e;else if(Array.isArray(e))r=Buffer.concat(e);else return{body:xn(`Unknown body format: ${typeof e}`),bodyLength:e.length,bodyTruncated:!0};let n=pm(t);if(typeof n=="string"&&n.toLowerCase()==="gzip")try{r=ym(r)}catch(i){return{body:xn(`Error while unzipping the body: ${i.message}`),bodyLength:r.length,bodyTruncated:!0}}return{body:r.slice(0,Ds).toString("base64"),bodyLength:r.length,bodyTruncated:r.length>Ds}}catch(r){return{body:xn(`Error while getting body logging data: ${r&&r.message}`),bodyLength:e.length,bodyTruncated:!0}}}var ym,Ds,_n=M(()=>{ym=require("zlib").gunzipSync,Ds=8*1024});var zs=m((JS,js)=>{"use strict";var{inherits:mm}=require("util"),{logUpstreamRequestInfo:hm,logUpstreamResponseInfo:gm,logUpstreamResponseBodyInfo:vm}=(En(),Is),Ze=require("http"),Ms=require("https"),Sm=require("url"),$s=(_n(),Fs).default,wm=/^xdn-user-assets-[a-zA-Z0-9-]+-[0-9]+\.s3\.amazonaws\.com$/;function Bs(e){let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}var Ws=!1,bm=Symbol("query"),On=bm;function Hs(e,t,r){if(typeof e=="string"){let n=e;try{e=Bs(new URL(n))}catch(i){if(e=Sm.parse(n),!e.hostname)throw i;!Ws&&!process.noDeprecation&&(Ws=!0,process.emitWarning(`The provided URL ${n} is not a valid URL, and is supported in the http module solely for compatibility.`,"DeprecationWarning","DEP0109"))}}else e&&e[On]&&e[On][On]?e=Bs(e):(r=t,t=e,e=null);return typeof t=="function"?(r=t,t=e||{}):t=Object.assign(e||{},t),{options:t,callback:r}}var et=Ze.ClientRequest,Us=0,Pn=[];function Rn(...e){let{options:t,callback:r}=Hs(...e),n=t.hostname||t.host;if(n&&(["127.0.0.1","0.0.0.0","::1","0:0:0:0:0:0:0:1","localhost"].includes(n)||wm.test(n)))et.call(this,t,r);else{let o=Em(this,t,r);et.call(this,t,o)}}function Em(e,t,r){let n=Us++;Pn[n]=Date.now();let i=a=>{gm({id:n,statusCode:a.statusCode,statusMessage:a.statusMessage,headers:a.headers,duration:Date.now()-Pn[n]});let u=[];a.on("data",l=>{u.push(l)}),a.on("end",()=>{vm(C({id:n},$s(u,a.headers)))}),r&&r(a)},o=[],s=function(a,u){if(Buffer.isBuffer(a)||typeof a=="string"){let l=a;Buffer.isBuffer(l)||(typeof u!="string"&&(u=null),l=Buffer.from(a,u)),o.push(l)}};return e.write=function(a,u,l){return s(a,u),Object.getPrototypeOf(Object.getPrototypeOf(e)).write.call(e,a,u,l)}.bind(e),e.end=function(a,u,l){return s(a,u),hm(C({id:n,method:t.method,protocol:t.protocol,host:t.hostname||t.host,port:t.port,path:t.path,headers:t.headers},$s(o,t.headers))),Object.getPrototypeOf(Object.getPrototypeOf(e)).end.call(e,a,u,l)}.bind(e),i}mm(Rn,Ze.ClientRequest);var Zt=et;Ze.request=function(t,r,n){return new Zt(t,r,n)};Ms.request=function(...t){let{options:r,callback:n}=Hs(...t);return r._defaultAgent=Ms.globalAgent,new Zt(r,n)};function xm(){Zt=Rn,Ze.ClientRequest=Rn,Us=0,Pn=[]}function _m(){Zt=et,Ze.ClientRequest=et}js.exports={enableRequestLogging:xm,disableRequestLogging:_m}});var z=m(An=>{"use strict";An.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,i)=>{if(n)return r(n);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};An.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Gs=m((KS,Vs)=>{var pe=require("constants"),Om=process.cwd,er=null,Pm=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return er||(er=Om.call(process)),er};try{process.cwd()}catch(e){}var Rm=process.chdir;process.chdir=function(e){er=null,Rm.call(process,e)};Vs.exports=Am;function Am(e){pe.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(c,d,f){f&&process.nextTick(f)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(c,d,f,p){p&&process.nextTick(p)},e.lchownSync=function(){}),Pm==="win32"&&(e.rename=function(c){return function(d,f,p){var y=Date.now(),h=0;c(d,f,function g(S){if(S&&(S.code==="EACCES"||S.code==="EPERM")&&Date.now()-y<6e4){setTimeout(function(){e.stat(f,function(R,A){R&&R.code==="ENOENT"?c(d,f,g):p(S)})},h),h<100&&(h+=10);return}p&&p(S)})}}(e.rename)),e.read=function(c){function d(f,p,y,h,g,S){var R;if(S&&typeof S=="function"){var A=0;R=function(j,O,L){if(j&&j.code==="EAGAIN"&&A<10)return A++,c.call(e,f,p,y,h,g,R);S.apply(this,arguments)}}return c.call(e,f,p,y,h,g,R)}return d.__proto__=c,d}(e.read),e.readSync=function(c){return function(d,f,p,y,h){for(var g=0;;)try{return c.call(e,d,f,p,y,h)}catch(S){if(S.code==="EAGAIN"&&g<10){g++;continue}throw S}}}(e.readSync);function t(c){c.lchmod=function(d,f,p){c.open(d,pe.O_WRONLY|pe.O_SYMLINK,f,function(y,h){if(y){p&&p(y);return}c.fchmod(h,f,function(g){c.close(h,function(S){p&&p(g||S)})})})},c.lchmodSync=function(d,f){var p=c.openSync(d,pe.O_WRONLY|pe.O_SYMLINK,f),y=!0,h;try{h=c.fchmodSync(p,f),y=!1}finally{if(y)try{c.closeSync(p)}catch(g){}else c.closeSync(p)}return h}}function r(c){pe.hasOwnProperty("O_SYMLINK")?(c.lutimes=function(d,f,p,y){c.open(d,pe.O_SYMLINK,function(h,g){if(h){y&&y(h);return}c.futimes(g,f,p,function(S){c.close(g,function(R){y&&y(S||R)})})})},c.lutimesSync=function(d,f,p){var y=c.openSync(d,pe.O_SYMLINK),h,g=!0;try{h=c.futimesSync(y,f,p),g=!1}finally{if(g)try{c.closeSync(y)}catch(S){}else c.closeSync(y)}return h}):(c.lutimes=function(d,f,p,y){y&&process.nextTick(y)},c.lutimesSync=function(){})}function n(c){return c&&function(d,f,p){return c.call(e,d,f,function(y){l(y)&&(y=null),p&&p.apply(this,arguments)})}}function i(c){return c&&function(d,f){try{return c.call(e,d,f)}catch(p){if(!l(p))throw p}}}function o(c){return c&&function(d,f,p,y){return c.call(e,d,f,p,function(h){l(h)&&(h=null),y&&y.apply(this,arguments)})}}function s(c){return c&&function(d,f,p){try{return c.call(e,d,f,p)}catch(y){if(!l(y))throw y}}}function a(c){return c&&function(d,f,p){typeof f=="function"&&(p=f,f=null);function y(h,g){g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),p&&p.apply(this,arguments)}return f?c.call(e,d,f,y):c.call(e,d,y)}}function u(c){return c&&function(d,f){var p=f?c.call(e,d,f):c.call(e,d);return p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296),p}}function l(c){if(!c||c.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Ks=m((QS,Js)=>{var Ys=require("stream").Stream;Js.exports=qm;function qm(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Ys.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var l=s[a];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(c,d){if(c){o.emit("error",c),o.readable=!1;return}o.fd=d,o.emit("open",d),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Ys.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Xs=m((XS,Qs)=>{"use strict";Qs.exports=Tm;function Tm(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var N=m((ZS,qn)=>{var ae=require("fs"),Lm=Gs(),Nm=Ks(),Im=Xs(),tr=require("util"),me,rr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(me=Symbol.for("graceful-fs.queue"),rr=Symbol.for("graceful-fs.previous")):(me="___graceful-fs.queue",rr="___graceful-fs.previous");function km(){}var tt=km;tr.debuglog?tt=tr.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(tt=function(){var e=tr.format.apply(tr,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});global[me]||(Zs=[],Object.defineProperty(global,me,{get:function(){return Zs}}),ae.close=function(e){function t(r,n){return e.call(ae,r,function(i){i||Ee(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,rr,{value:e}),t}(ae.close),ae.closeSync=function(e){function t(r){e.apply(ae,arguments),Ee()}return Object.defineProperty(t,rr,{value:e}),t}(ae.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){tt(global[me]),require("assert").equal(global[me].length,0)}));var Zs;qn.exports=Tn(Im(ae));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ae.__patched&&(qn.exports=Tn(ae),ae.__patched=!0);function Tn(e){Lm(e),e.gracefulify=Tn,e.createReadStream=A,e.createWriteStream=j;var t=e.readFile;e.readFile=r;function r(v,E,w){return typeof E=="function"&&(w=E,E=null),x(v,E,w);function x(q,I,T){return t(q,I,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?rt([x,[q,I,T]]):(typeof T=="function"&&T.apply(this,arguments),Ee())})}}var n=e.writeFile;e.writeFile=i;function i(v,E,w,x){return typeof w=="function"&&(x=w,w=null),q(v,E,w,x);function q(I,T,J,X){return n(I,T,J,function(Z){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?rt([q,[I,T,J,X]]):(typeof X=="function"&&X.apply(this,arguments),Ee())})}}var o=e.appendFile;o&&(e.appendFile=s);function s(v,E,w,x){return typeof w=="function"&&(x=w,w=null),q(v,E,w,x);function q(I,T,J,X){return o(I,T,J,function(Z){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?rt([q,[I,T,J,X]]):(typeof X=="function"&&X.apply(this,arguments),Ee())})}}var a=e.readdir;e.readdir=u;function u(v,E,w){var x=[v];return typeof E!="function"?x.push(E):w=E,x.push(q),l(x);function q(I,T){T&&T.sort&&T.sort(),I&&(I.code==="EMFILE"||I.code==="ENFILE")?rt([l,[x]]):(typeof w=="function"&&w.apply(this,arguments),Ee())}}function l(v){return a.apply(e,v)}if(process.version.substr(0,4)==="v0.8"){var c=Nm(e);h=c.ReadStream,S=c.WriteStream}var d=e.ReadStream;d&&(h.prototype=Object.create(d.prototype),h.prototype.open=g);var f=e.WriteStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=R),Object.defineProperty(e,"ReadStream",{get:function(){return h},set:function(v){h=v},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(v){S=v},enumerable:!0,configurable:!0});var p=h;Object.defineProperty(e,"FileReadStream",{get:function(){return p},set:function(v){p=v},enumerable:!0,configurable:!0});var y=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return y},set:function(v){y=v},enumerable:!0,configurable:!0});function h(v,E){return this instanceof h?(d.apply(this,arguments),this):h.apply(Object.create(h.prototype),arguments)}function g(){var v=this;L(v.path,v.flags,v.mode,function(E,w){E?(v.autoClose&&v.destroy(),v.emit("error",E)):(v.fd=w,v.emit("open",w),v.read())})}function S(v,E){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function R(){var v=this;L(v.path,v.flags,v.mode,function(E,w){E?(v.destroy(),v.emit("error",E)):(v.fd=w,v.emit("open",w))})}function A(v,E){return new e.ReadStream(v,E)}function j(v,E){return new e.WriteStream(v,E)}var O=e.open;e.open=L;function L(v,E,w,x){return typeof w=="function"&&(x=w,w=null),q(v,E,w,x);function q(I,T,J,X){return O(I,T,J,function(Z,H0){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?rt([q,[I,T,J,X]]):(typeof X=="function"&&X.apply(this,arguments),Ee())})}}return e}function rt(e){tt("ENQUEUE",e[0].name,e[1]),global[me].push(e)}function Ee(){var e=global[me].shift();e&&(tt("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}});var Ln=m(xe=>{"use strict";var ea=z().fromCallback,K=N(),Cm=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof K[e]=="function");Object.keys(K).forEach(e=>{e!=="promises"&&(xe[e]=K[e])});Cm.forEach(e=>{xe[e]=ea(K[e])});xe.exists=function(e,t){return typeof t=="function"?K.exists(e,t):new Promise(r=>K.exists(e,r))};xe.read=function(e,t,r,n,i,o){return typeof o=="function"?K.read(e,t,r,n,i,o):new Promise((s,a)=>{K.read(e,t,r,n,i,(u,l,c)=>{if(u)return a(u);s({bytesRead:l,buffer:c})})})};xe.write=function(e,t,...r){return typeof r[r.length-1]=="function"?K.write(e,t,...r):new Promise((n,i)=>{K.write(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof K.realpath.native=="function"&&(xe.realpath.native=ea(K.realpath.native))});var In=m((tw,ta)=>{"use strict";var Nn=require("path");function ra(e){return e=Nn.normalize(Nn.resolve(e)).split(Nn.sep),e.length>0?e[0]:null}var Fm=/[<>:"|?*]/;function Dm(e){let t=ra(e);return e=e.replace(t,""),Fm.test(e)}ta.exports={getRootPath:ra,invalidWin32Path:Dm}});var ia=m((rw,na)=>{"use strict";var jm=N(),kn=require("path"),Mm=In().invalidWin32Path,$m=parseInt("0777",8);function Cn(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&Mm(e)){let s=new Error(e+" contains invalid WIN32 path characters.");return s.code="EINVAL",r(s)}let i=t.mode,o=t.fs||jm;i===void 0&&(i=$m&~process.umask()),n||(n=null),r=r||function(){},e=kn.resolve(e),o.mkdir(e,i,s=>{if(!s)return n=n||e,r(null,n);switch(s.code){case"ENOENT":if(kn.dirname(e)===e)return r(s);Cn(kn.dirname(e),t,(a,u)=>{a?r(a,u):Cn(e,t,r,u)});break;default:o.stat(e,(a,u)=>{a||!u.isDirectory()?r(s,n):r(null,n)});break}})}na.exports=Cn});var sa=m((nw,oa)=>{"use strict";var Bm=N(),Fn=require("path"),Wm=In().invalidWin32Path,Hm=parseInt("0777",8);function Dn(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,i=t.fs||Bm;if(process.platform==="win32"&&Wm(e)){let o=new Error(e+" contains invalid WIN32 path characters.");throw o.code="EINVAL",o}n===void 0&&(n=Hm&~process.umask()),r||(r=null),e=Fn.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(o){if(o.code==="ENOENT"){if(Fn.dirname(e)===e)throw o;r=Dn(Fn.dirname(e),t,r),Dn(e,t,r)}else{let s;try{s=i.statSync(e)}catch(a){throw o}if(!s.isDirectory())throw o}}return r}oa.exports=Dn});var G=m((iw,aa)=>{"use strict";var Um=z().fromCallback,jn=Um(ia()),Mn=sa();aa.exports={mkdirs:jn,mkdirsSync:Mn,mkdirp:jn,mkdirpSync:Mn,ensureDir:jn,ensureDirSync:Mn}});var $n=m((ow,ua)=>{"use strict";var $=N(),ca=require("os"),nr=require("path");function zm(){let e=nr.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=nr.join(ca.tmpdir(),e);let t=new Date(1435410243862);$.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=$.openSync(e,"r+");return $.futimesSync(r,t,t),$.closeSync(r),$.statSync(e).mtime>1435410243e3}function Vm(e){let t=nr.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=nr.join(ca.tmpdir(),t);let r=new Date(1435410243862);$.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);$.open(t,"r+",(i,o)=>{if(i)return e(i);$.futimes(o,r,r,s=>{if(s)return e(s);$.close(o,a=>{if(a)return e(a);$.stat(t,(u,l)=>{if(u)return e(u);e(null,l.mtime>1435410243e3)})})})})})}function Gm(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function Jm(e,t,r,n){$.open(e,"r+",(i,o)=>{if(i)return n(i);$.futimes(o,t,r,s=>{$.close(o,a=>{n&&n(s||a)})})})}function Ym(e,t,r){let n=$.openSync(e,"r+");return $.futimesSync(n,t,r),$.closeSync(n)}ua.exports={hasMillisRes:Vm,hasMillisResSync:zm,timeRemoveMillis:Gm,utimesMillis:Jm,utimesMillisSync:Ym}});var ot=m((sw,la)=>{"use strict";var Q=N(),V=require("path"),fa=10,da=5,Km=0,Bn=process.versions.node.split("."),ya=Number.parseInt(Bn[0],10),pa=Number.parseInt(Bn[1],10),Qm=Number.parseInt(Bn[2],10);function nt(){if(ya>fa)return!0;if(ya===fa){if(pa>da)return!0;if(pa===da&&Qm>=Km)return!0}return!1}function Xm(e,t,r){nt()?Q.stat(e,{bigint:!0},(n,i)=>{if(n)return r(n);Q.stat(t,{bigint:!0},(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))}):Q.stat(e,(n,i)=>{if(n)return r(n);Q.stat(t,(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))})}function Zm(e,t){let r,n;nt()?r=Q.statSync(e,{bigint:!0}):r=Q.statSync(e);try{nt()?n=Q.statSync(t,{bigint:!0}):n=Q.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:r,destStat:null};throw i}return{srcStat:r,destStat:n}}function eh(e,t,r,n){Xm(e,t,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;return a&&a.ino&&a.dev&&a.ino===s.ino&&a.dev===s.dev?n(new Error("Source and destination must not be the same.")):s.isDirectory()&&Wn(e,t)?n(new Error(it(e,t,r))):n(null,{srcStat:s,destStat:a})})}function th(e,t,r){let{srcStat:n,destStat:i}=Zm(e,t);if(i&&i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&Wn(e,t))throw new Error(it(e,t,r));return{srcStat:n,destStat:i}}function Hn(e,t,r,n,i){let o=V.resolve(V.dirname(e)),s=V.resolve(V.dirname(r));if(s===o||s===V.parse(s).root)return i();nt()?Q.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(it(e,r,n))):Hn(e,t,s,n,i)):Q.stat(s,(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(it(e,r,n))):Hn(e,t,s,n,i))}function ma(e,t,r,n){let i=V.resolve(V.dirname(e)),o=V.resolve(V.dirname(r));if(o===i||o===V.parse(o).root)return;let s;try{nt()?s=Q.statSync(o,{bigint:!0}):s=Q.statSync(o)}catch(a){if(a.code==="ENOENT")return;throw a}if(s.ino&&s.dev&&s.ino===t.ino&&s.dev===t.dev)throw new Error(it(e,r,n));return ma(e,t,o,n)}function Wn(e,t){let r=V.resolve(e).split(V.sep).filter(i=>i),n=V.resolve(t).split(V.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function it(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}la.exports={checkPaths:eh,checkPathsSync:th,checkParentPaths:Hn,checkParentPathsSync:ma,isSrcSubdir:Wn}});var ga=m((aw,ha)=>{"use strict";ha.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}});var Ea=m((uw,va)=>{"use strict";var P=N(),st=require("path"),rh=G().mkdirsSync,nh=$n().utimesMillisSync,at=ot();function oh(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:i}=at.checkPathsSync(e,t,"copy");return at.checkParentPathsSync(e,n,t,"copy"),ih(i,e,t,r)}function ih(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=st.dirname(r);return P.existsSync(i)||rh(i),Sa(e,t,r,n)}function Sa(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return sh(e,t,r,n)}function sh(e,t,r,n){let o=(n.dereference?P.statSync:P.lstatSync)(t);if(o.isDirectory())return uh(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return ah(o,e,t,r,n);if(o.isSymbolicLink())return ch(e,t,r,n)}function ah(e,t,r,n,i){return t?lh(e,r,n,i):wa(e,r,n,i)}function lh(e,t,r,n){if(n.overwrite)return P.unlinkSync(r),wa(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function wa(e,t,r,n){return typeof P.copyFileSync=="function"?(P.copyFileSync(t,r),P.chmodSync(r,e.mode),n.preserveTimestamps?nh(r,e.atime,e.mtime):void 0):fh(e,t,r,n)}function fh(e,t,r,n){let i=64*1024,o=ga()(i),s=P.openSync(t,"r"),a=P.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let l=P.readSync(s,o,0,i,u);P.writeSync(a,o,0,l),u+=l}n.preserveTimestamps&&P.futimesSync(a,e.atime,e.mtime),P.closeSync(s),P.closeSync(a)}function uh(e,t,r,n,i){if(!t)return dh(e,r,n,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return ba(r,n,i)}function dh(e,t,r,n){return P.mkdirSync(r),ba(t,r,n),P.chmodSync(r,e.mode)}function ba(e,t,r){P.readdirSync(e).forEach(n=>yh(n,e,t,r))}function yh(e,t,r,n){let i=st.join(t,e),o=st.join(r,e),{destStat:s}=at.checkPathsSync(i,o,"copy");return Sa(s,i,o,n)}function ch(e,t,r,n){let i=P.readlinkSync(t);if(n.dereference&&(i=st.resolve(process.cwd(),i)),e){let o;try{o=P.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return P.symlinkSync(i,r);throw s}if(n.dereference&&(o=st.resolve(process.cwd(),o)),at.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(P.statSync(r).isDirectory()&&at.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return ph(i,r)}else return P.symlinkSync(i,r)}function ph(e,t){return P.unlinkSync(t),P.symlinkSync(e,t)}va.exports=oh});var Un=m((cw,xa)=>{"use strict";xa.exports={copySync:Ea()}});var ue=m((lw,_a)=>{"use strict";var mh=z().fromPromise,Oa=Ln();function hh(e){return Oa.access(e).then(()=>!0).catch(()=>!1)}_a.exports={pathExists:mh(hh),pathExistsSync:Oa.existsSync}});var ka=m((fw,Pa)=>{"use strict";var D=N(),ut=require("path"),gh=G().mkdirs,vh=ue().pathExists,Sh=$n().utimesMillis,ct=ot();function wh(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),ct.checkPaths(e,t,"copy",(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;ct.checkParentPaths(e,s,t,"copy",u=>u?n(u):r.filter?Aa(Ra,a,e,t,r,n):Ra(a,e,t,r,n))})}function Ra(e,t,r,n,i){let o=ut.dirname(r);vh(o,(s,a)=>{if(s)return i(s);if(a)return zn(e,t,r,n,i);gh(o,u=>u?i(u):zn(e,t,r,n,i))})}function Aa(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function zn(e,t,r,n,i){return n.filter?Aa(qa,e,t,r,n,i):qa(e,t,r,n,i)}function qa(e,t,r,n,i){(n.dereference?D.stat:D.lstat)(t,(s,a)=>{if(s)return i(s);if(a.isDirectory())return Eh(a,e,t,r,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return bh(a,e,t,r,n,i);if(a.isSymbolicLink())return xh(e,t,r,n,i)})}function bh(e,t,r,n,i,o){return t?_h(e,r,n,i,o):Ta(e,r,n,i,o)}function _h(e,t,r,n,i){if(n.overwrite)D.unlink(r,o=>o?i(o):Ta(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function Ta(e,t,r,n,i){return typeof D.copyFile=="function"?D.copyFile(t,r,o=>o?i(o):La(e,r,n,i)):Oh(e,t,r,n,i)}function Oh(e,t,r,n,i){let o=D.createReadStream(t);o.on("error",s=>i(s)).once("open",()=>{let s=D.createWriteStream(r,{mode:e.mode});s.on("error",a=>i(a)).on("open",()=>o.pipe(s)).once("close",()=>La(e,r,n,i))})}function La(e,t,r,n){D.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?Sh(t,e.atime,e.mtime,n):n())}function Eh(e,t,r,n,i,o){return t?t&&!t.isDirectory()?o(new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):Na(r,n,i,o):Ph(e,r,n,i,o)}function Ph(e,t,r,n,i){D.mkdir(r,o=>{if(o)return i(o);Na(t,r,n,s=>s?i(s):D.chmod(r,e.mode,i))})}function Na(e,t,r,n){D.readdir(e,(i,o)=>i?n(i):Ia(o,e,t,r,n))}function Ia(e,t,r,n,i){let o=e.pop();return o?Rh(e,o,t,r,n,i):i()}function Rh(e,t,r,n,i,o){let s=ut.join(r,t),a=ut.join(n,t);ct.checkPaths(s,a,"copy",(u,l)=>{if(u)return o(u);let{destStat:c}=l;zn(c,s,a,i,d=>d?o(d):Ia(e,r,n,i,o))})}function xh(e,t,r,n,i){D.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=ut.resolve(process.cwd(),s)),e)D.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?D.symlink(s,r,i):i(a):(n.dereference&&(u=ut.resolve(process.cwd(),u)),ct.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&ct.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):Ah(s,r,i)));else return D.symlink(s,r,i)})}function Ah(e,t,r){D.unlink(t,n=>n?r(n):D.symlink(e,t,r))}Pa.exports=wh});var Vn=m((dw,Ca)=>{"use strict";var qh=z().fromCallback;Ca.exports={copy:qh(ka())}});var Ua=m((yw,Fa)=>{"use strict";var Da=N(),ja=require("path"),_=require("assert"),lt=process.platform==="win32";function Ma(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Da[r],r=r+"Sync",e[r]=e[r]||Da[r]}),e.maxBusyTries=e.maxBusyTries||3}function Gn(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),_(e,"rimraf: missing path"),_.strictEqual(typeof e,"string","rimraf: path should be a string"),_.strictEqual(typeof r,"function","rimraf: callback function required"),_(t,"rimraf: invalid options argument provided"),_.strictEqual(typeof t,"object","rimraf: options should be object"),Ma(t),$a(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let s=n*100;return setTimeout(()=>$a(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function $a(e,t,r){_(e),_(t),_(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&lt)return Ba(e,t,n,r);if(i&&i.isDirectory())return ir(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return lt?Ba(e,t,o,r):ir(e,t,o,r);if(o.code==="EISDIR")return ir(e,t,o,r)}return r(o)})})}function Ba(e,t,r,n){_(e),_(t),_(typeof n=="function"),r&&_(r instanceof Error),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?ir(e,t,r,n):t.unlink(e,n)})})}function Wa(e,t,r){let n;_(e),_(t),r&&_(r instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?or(e,t,r):t.unlinkSync(e)}function ir(e,t,r,n){_(e),_(t),r&&_(r instanceof Error),_(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Th(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Th(e,t,r){_(e),_(t),_(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{Gn(ja.join(e,a),t,u=>{if(!s){if(u)return r(s=u);--o==0&&t.rmdir(e,r)}})})})}function Ha(e,t){let r;t=t||{},Ma(t),_(e,"rimraf: missing path"),_.strictEqual(typeof e,"string","rimraf: path should be a string"),_(t,"rimraf: missing options"),_.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&lt&&Wa(e,t,n)}try{r&&r.isDirectory()?or(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return lt?Wa(e,t,n):or(e,t,n);if(n.code!=="EISDIR")throw n;or(e,t,n)}}function or(e,t,r){_(e),_(t),r&&_(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Lh(e,t);else if(n.code!=="ENOENT")throw n}}function Lh(e,t){if(_(e),_(t),t.readdirSync(e).forEach(r=>Ha(ja.join(e,r),t)),lt){let r=Date.now();do try{return t.rmdirSync(e,t)}catch(n){}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Fa.exports=Gn;Gn.sync=Ha});var ft=m((pw,za)=>{"use strict";var Nh=z().fromCallback,Va=Ua();za.exports={remove:Nh(Va),removeSync:Va.sync}});var eu=m((mw,Ga)=>{"use strict";var Ih=z().fromCallback,Ja=N(),Ya=require("path"),Ka=G(),Qa=ft(),Xa=Ih(function(t,r){r=r||function(){},Ja.readdir(t,(n,i)=>{if(n)return Ka.mkdirs(t,r);i=i.map(s=>Ya.join(t,s)),o();function o(){let s=i.pop();if(!s)return r();Qa.remove(s,a=>{if(a)return r(a);o()})}})});function Za(e){let t;try{t=Ja.readdirSync(e)}catch(r){return Ka.mkdirsSync(e)}t.forEach(r=>{r=Ya.join(e,r),Qa.removeSync(r)})}Ga.exports={emptyDirSync:Za,emptydirSync:Za,emptyDir:Xa,emptydir:Xa}});var iu=m((hw,tu)=>{"use strict";var kh=z().fromCallback,ru=require("path"),dt=N(),nu=G(),Ch=ue().pathExists;function Fh(e,t){function r(){dt.writeFile(e,"",n=>{if(n)return t(n);t()})}dt.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=ru.dirname(e);Ch(o,(s,a)=>{if(s)return t(s);if(a)return r();nu.mkdirs(o,u=>{if(u)return t(u);r()})})})}function Dh(e){let t;try{t=dt.statSync(e)}catch(n){}if(t&&t.isFile())return;let r=ru.dirname(e);dt.existsSync(r)||nu.mkdirsSync(r),dt.writeFileSync(e,"")}tu.exports={createFile:kh(Fh),createFileSync:Dh}});var cu=m((gw,ou)=>{"use strict";var jh=z().fromCallback,su=require("path"),_e=N(),au=G(),uu=ue().pathExists;function Mh(e,t,r){function n(i,o){_e.link(i,o,s=>{if(s)return r(s);r(null)})}uu(t,(i,o)=>{if(i)return r(i);if(o)return r(null);_e.lstat(e,s=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);let a=su.dirname(t);uu(a,(u,l)=>{if(u)return r(u);if(l)return n(e,t);au.mkdirs(a,c=>{if(c)return r(c);n(e,t)})})})})}function $h(e,t){if(_e.existsSync(t))return;try{_e.lstatSync(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=su.dirname(t);return _e.existsSync(n)||au.mkdirsSync(n),_e.linkSync(e,t)}ou.exports={createLink:jh(Mh),createLinkSync:$h}});var fu=m((vw,lu)=>{"use strict";var he=require("path"),yt=N(),Bh=ue().pathExists;function Wh(e,t,r){if(he.isAbsolute(e))return yt.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=he.dirname(t),i=he.join(n,e);return Bh(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):yt.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:he.relative(n,e)})))}}function Hh(e,t){let r;if(he.isAbsolute(e)){if(r=yt.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=he.dirname(t),i=he.join(n,e);if(r=yt.existsSync(i),r)return{toCwd:i,toDst:e};if(r=yt.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:he.relative(n,e)}}}lu.exports={symlinkPaths:Wh,symlinkPathsSync:Hh}});var pu=m((Sw,du)=>{"use strict";var yu=N();function Uh(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);yu.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function zh(e,t){let r;if(t)return t;try{r=yu.lstatSync(e)}catch(n){return"file"}return r&&r.isDirectory()?"dir":"file"}du.exports={symlinkType:Uh,symlinkTypeSync:zh}});var bu=m((ww,mu)=>{"use strict";var Vh=z().fromCallback,hu=require("path"),Ce=N(),gu=G(),Gh=gu.mkdirs,Jh=gu.mkdirsSync,vu=fu(),Yh=vu.symlinkPaths,Kh=vu.symlinkPathsSync,Su=pu(),Qh=Su.symlinkType,Xh=Su.symlinkTypeSync,wu=ue().pathExists;function Zh(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,wu(t,(i,o)=>{if(i)return n(i);if(o)return n(null);Yh(e,t,(s,a)=>{if(s)return n(s);e=a.toDst,Qh(a.toCwd,r,(u,l)=>{if(u)return n(u);let c=hu.dirname(t);wu(c,(d,f)=>{if(d)return n(d);if(f)return Ce.symlink(e,t,l,n);Gh(c,p=>{if(p)return n(p);Ce.symlink(e,t,l,n)})})})})})}function eg(e,t,r){if(Ce.existsSync(t))return;let i=Kh(e,t);e=i.toDst,r=Xh(i.toCwd,r);let o=hu.dirname(t);return Ce.existsSync(o)||Jh(o),Ce.symlinkSync(e,t,r)}mu.exports={createSymlink:Vh(Zh),createSymlinkSync:eg}});var xu=m((bw,Eu)=>{"use strict";var sr=iu(),ar=cu(),ur=bu();Eu.exports={createFile:sr.createFile,createFileSync:sr.createFileSync,ensureFile:sr.createFile,ensureFileSync:sr.createFileSync,createLink:ar.createLink,createLinkSync:ar.createLinkSync,ensureLink:ar.createLink,ensureLinkSync:ar.createLinkSync,createSymlink:ur.createSymlink,createSymlinkSync:ur.createSymlinkSync,ensureSymlink:ur.createSymlink,ensureSymlinkSync:ur.createSymlinkSync}});var Ru=m((Ew,_u)=>{var Fe;try{Fe=N()}catch(e){Fe=require("fs")}function tg(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||Fe,i=!0;"throws"in t&&(i=t.throws),n.readFile(e,t,function(o,s){if(o)return r(o);s=Ou(s);var a;try{a=JSON.parse(s,t?t.reviver:null)}catch(u){return i?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,a)})}function rg(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||Fe,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=Ou(i),JSON.parse(i,t.reviver)}catch(o){if(n)throw o.message=e+": "+o.message,o;return null}}function Pu(e,t){var r,n=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,r);return i.replace(/\n/g,n)+n}function ng(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var i=r.fs||Fe,o="";try{o=Pu(t,r)}catch(s){n&&n(s,null);return}i.writeFile(e,o,r,n)}function ig(e,t,r){r=r||{};var n=r.fs||Fe,i=Pu(t,r);return n.writeFileSync(e,i,r)}function Ou(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var og={readFile:tg,readFileSync:rg,writeFile:ng,writeFileSync:ig};_u.exports=og});var lr=m((xw,Au)=>{"use strict";var qu=z().fromCallback,cr=Ru();Au.exports={readJson:qu(cr.readFile),readJsonSync:cr.readFileSync,writeJson:qu(cr.writeFile),writeJsonSync:cr.writeFileSync}});var Nu=m((_w,Tu)=>{"use strict";var sg=require("path"),ag=G(),ug=ue().pathExists,Lu=lr();function cg(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=sg.dirname(e);ug(i,(o,s)=>{if(o)return n(o);if(s)return Lu.writeJson(e,t,r,n);ag.mkdirs(i,a=>{if(a)return n(a);Lu.writeJson(e,t,r,n)})})}Tu.exports=cg});var ku=m((Ow,Iu)=>{"use strict";var lg=N(),fg=require("path"),dg=G(),yg=lr();function pg(e,t,r){let n=fg.dirname(e);lg.existsSync(n)||dg.mkdirsSync(n),yg.writeJsonSync(e,t,r)}Iu.exports=pg});var Fu=m((Pw,Cu)=>{"use strict";var mg=z().fromCallback,H=lr();H.outputJson=mg(Nu());H.outputJsonSync=ku();H.outputJSON=H.outputJson;H.outputJSONSync=H.outputJsonSync;H.writeJSON=H.writeJson;H.writeJSONSync=H.writeJsonSync;H.readJSON=H.readJson;H.readJSONSync=H.readJsonSync;Cu.exports=H});var Wu=m((Rw,Du)=>{"use strict";var ju=N(),hg=require("path"),gg=Un().copySync,Mu=ft().removeSync,vg=G().mkdirpSync,$u=ot();function wg(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i}=$u.checkPathsSync(e,t,"move");return $u.checkParentPathsSync(e,i,t,"move"),vg(hg.dirname(t)),Sg(e,t,n)}function Sg(e,t,r){if(r)return Mu(t),Bu(e,t,r);if(ju.existsSync(t))throw new Error("dest already exists.");return Bu(e,t,r)}function Bu(e,t,r){try{ju.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return bg(e,t,r)}}function bg(e,t,r){return gg(e,t,{overwrite:r,errorOnExist:!0}),Mu(e)}Du.exports=wg});var Uu=m((Aw,Hu)=>{"use strict";Hu.exports={moveSync:Wu()}});var Yu=m((qw,zu)=>{"use strict";var Eg=N(),xg=require("path"),_g=Vn().copy,Vu=ft().remove,Og=G().mkdirp,Pg=ue().pathExists,Gu=ot();function Ag(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=r.overwrite||r.clobber||!1;Gu.checkPaths(e,t,"move",(o,s)=>{if(o)return n(o);let{srcStat:a}=s;Gu.checkParentPaths(e,a,t,"move",u=>{if(u)return n(u);Og(xg.dirname(t),l=>l?n(l):Rg(e,t,i,n))})})}function Rg(e,t,r,n){if(r)return Vu(t,i=>i?n(i):Ju(e,t,r,n));Pg(t,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):Ju(e,t,r,n))}function Ju(e,t,r,n){Eg.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):qg(e,t,r,n):n())}function qg(e,t,r,n){_g(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Vu(e,n))}zu.exports=Ag});var Qu=m((Tw,Ku)=>{"use strict";var Tg=z().fromCallback;Ku.exports={move:Tg(Yu())}});var tc=m((Lw,Xu)=>{"use strict";var Lg=z().fromCallback,pt=N(),Zu=require("path"),ec=G(),Ng=ue().pathExists;function Ig(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Zu.dirname(e);Ng(i,(o,s)=>{if(o)return n(o);if(s)return pt.writeFile(e,t,r,n);ec.mkdirs(i,a=>{if(a)return n(a);pt.writeFile(e,t,r,n)})})}function kg(e,...t){let r=Zu.dirname(e);if(pt.existsSync(r))return pt.writeFileSync(e,...t);ec.mkdirsSync(r),pt.writeFileSync(e,...t)}Xu.exports={outputFile:Lg(Ig),outputFileSync:kg}});var nc=m((Nw,Jn)=>{"use strict";Jn.exports=Object.assign({},Ln(),Un(),Vn(),eu(),xu(),Fu(),G(),Uu(),Qu(),tc(),ue(),ft());var rc=require("fs");Object.getOwnPropertyDescriptor(rc,"promises")&&Object.defineProperty(Jn.exports,"promises",{get(){return rc.promises}})});function ic(e){return(0,Oe.join)("__backends__",`${e}.js`)}var Oe,fr,Cg,kw,Cw,Fw,Fg,Dw,oc=M(()=>{Oe=le(require("path")),fr=".layer0",Cg=(0,Oe.join)(fr,"lambda"),kw=(0,Oe.join)(fr,"s3"),Cw=(0,Oe.join)(fr,"s3-permanent"),Fw=(0,Oe.join)(fr,"src"),Fg="routes.js";Dw=(0,Oe.join)(process.cwd(),Cg,Fg)});var ac=m((jw,sc)=>{"use strict";sc.exports=e=>{let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}});function Pe(modulePath,{ignoreErrors=!1}={}){try{return eval("require")((0,uc.default)(modulePath))}catch(e){if(ignoreErrors)return;throw e}}var uc,dr=M(()=>{uc=le(ac())});function lc(e){return gn()?jg().runAndReturn(e):(global.__layer0_timings__=new cc,e())}function jg(){let e=Pe("cls-hooked");return Yn||(Yn=e.createNamespace(Dg)),Yn}var Dg,Yn,cc,fc=M(()=>{vn();dr();Dg="layer0";cc=class{constructor(){this.values={}}get(t){return this.values[t]}set(t,r){this.values[t]=r}}});function dc(e){return(...t)=>lc(()=>e(...t))}var yc,pc,mc=M(()=>{Ke();fc();(function(e){e.edgeCache="oc",e.transformRequest="wa",e.transformResponse="wz",e.routeMatching="wr",e.proxying="wp"})(yc||(yc={}));(function(e){e.hit="hit",e.pass="pass",e.cached="cached"})(pc||(pc={}))});function Kn(e){return typeof e=="string"&&(e=Pe(e)),e.default&&(e=e.default),typeof e=="function"&&(e=e()),e}var hc=M(()=>{dr()});var vc=m((Yw,gc)=>{"use strict";gc.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var bc=m((Kw,Sc)=>{"use strict";var wc=typeof Symbol!="undefined"&&Symbol,Mg=vc();Sc.exports=function(){return typeof wc!="function"||typeof Symbol!="function"||typeof wc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Mg()}});var xc=m((Qw,Ec)=>{"use strict";var $g="Function.prototype.bind called on incompatible ",Qn=Array.prototype.slice,Bg=Object.prototype.toString,Wg="[object Function]";Ec.exports=function(t){var r=this;if(typeof r!="function"||Bg.call(r)!==Wg)throw new TypeError($g+r);for(var n=Qn.call(arguments,1),i,o=function(){if(this instanceof i){var c=r.apply(this,n.concat(Qn.call(arguments)));return Object(c)===c?c:this}else return r.apply(t,n.concat(Qn.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}});var yr=m((Xw,_c)=>{"use strict";var Hg=xc();_c.exports=Function.prototype.bind||Hg});var Pc=m((Zw,Oc)=>{"use strict";var Ug=yr();Oc.exports=Ug.call(Function.call,Object.prototype.hasOwnProperty)});var gr=m((eb,Rc)=>{"use strict";var b,mt=SyntaxError,Ac=Function,De=TypeError,Xn=function(e){try{return Ac('"use strict"; return ('+e+").constructor;")()}catch(t){}},Re=Object.getOwnPropertyDescriptor;if(Re)try{Re({},"")}catch(e){Re=null}var Zn=function(){throw new De},zg=Re?function(){try{return arguments.callee,Zn}catch(e){try{return Re(arguments,"callee").get}catch(t){return Zn}}}():Zn,je=bc()(),ge=Object.getPrototypeOf||function(e){return e.__proto__},Me={},Vg=typeof Uint8Array=="undefined"?b:ge(Uint8Array),$e={"%AggregateError%":typeof AggregateError=="undefined"?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?b:ArrayBuffer,"%ArrayIteratorPrototype%":je?ge([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":Me,"%AsyncGenerator%":Me,"%AsyncGeneratorFunction%":Me,"%AsyncIteratorPrototype%":Me,"%Atomics%":typeof Atomics=="undefined"?b:Atomics,"%BigInt%":typeof BigInt=="undefined"?b:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?b:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?b:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?b:FinalizationRegistry,"%Function%":Ac,"%GeneratorFunction%":Me,"%Int8Array%":typeof Int8Array=="undefined"?b:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?b:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":je?ge(ge([][Symbol.iterator]())):b,"%JSON%":typeof JSON=="object"?JSON:b,"%Map%":typeof Map=="undefined"?b:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!je?b:ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?b:Promise,"%Proxy%":typeof Proxy=="undefined"?b:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?b:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?b:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!je?b:ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":je?ge(""[Symbol.iterator]()):b,"%Symbol%":je?Symbol:b,"%SyntaxError%":mt,"%ThrowTypeError%":zg,"%TypedArray%":Vg,"%TypeError%":De,"%Uint8Array%":typeof Uint8Array=="undefined"?b:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?b:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?b:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?b:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?b:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?b:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?b:WeakSet},Gg=function e(t){var r;if(t==="%AsyncFunction%")r=Xn("async function () {}");else if(t==="%GeneratorFunction%")r=Xn("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Xn("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&(r=ge(i.prototype))}return $e[t]=r,r},qc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pr=yr(),mr=Pc(),Jg=pr.call(Function.call,Array.prototype.concat),Yg=pr.call(Function.apply,Array.prototype.splice),Tc=pr.call(Function.call,String.prototype.replace),hr=pr.call(Function.call,String.prototype.slice),Kg=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Qg=/\\(\\)?/g,Xg=function(t){var r=hr(t,0,1),n=hr(t,-1);if(r==="%"&&n!=="%")throw new mt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new mt("invalid intrinsic syntax, expected opening `%`");var i=[];return Tc(t,Kg,function(o,s,a,u){i[i.length]=a?Tc(u,Qg,"$1"):s||o}),i},Zg=function(t,r){var n=t,i;if(mr(qc,n)&&(i=qc[n],n="%"+i[0]+"%"),mr($e,n)){var o=$e[n];if(o===Me&&(o=Gg(n)),typeof o=="undefined"&&!r)throw new De("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new mt("intrinsic "+t+" does not exist!")};Rc.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new De("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new De('"allowMissing" argument must be a boolean');var n=Xg(t),i=n.length>0?n[0]:"",o=Zg("%"+i+"%",r),s=o.name,a=o.value,u=!1,l=o.alias;l&&(i=l[0],Yg(n,Jg([0,1],l)));for(var c=1,d=!0;c<n.length;c+=1){var f=n[c],p=hr(f,0,1),y=hr(f,-1);if((p==='"'||p==="'"||p==="`"||y==='"'||y==="'"||y==="`")&&p!==y)throw new mt("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(u=!0),i+="."+f,s="%"+i+"%",mr($e,s))a=$e[s];else if(a!=null){if(!(f in a)){if(!r)throw new De("base intrinsic for "+t+" exists, but the property is not available.");return}if(Re&&c+1>=n.length){var h=Re(a,f);d=!!h,d&&"get"in h&&!("originalValue"in h.get)?a=h.get:a=a[f]}else d=mr(a,f),a=a[f];d&&!u&&($e[s]=a)}}return a}});var Fc=m((tb,vr)=>{"use strict";var ei=yr(),Be=gr(),Lc=Be("%Function.prototype.apply%"),Nc=Be("%Function.prototype.call%"),Ic=Be("%Reflect.apply%",!0)||ei.call(Nc,Lc),kc=Be("%Object.getOwnPropertyDescriptor%",!0),Ae=Be("%Object.defineProperty%",!0),ev=Be("%Math.max%");if(Ae)try{Ae({},"a",{value:1})}catch(e){Ae=null}vr.exports=function(t){var r=Ic(ei,Nc,arguments);if(kc&&Ae){var n=kc(r,"length");n.configurable&&Ae(r,"length",{value:1+ev(0,t.length-(arguments.length-1))})}return r};var Cc=function(){return Ic(ei,Lc,arguments)};Ae?Ae(vr.exports,"apply",{value:Cc}):vr.exports.apply=Cc});var $c=m((rb,Dc)=>{"use strict";var jc=gr(),Mc=Fc(),tv=Mc(jc("String.prototype.indexOf"));Dc.exports=function(t,r){var n=jc(t,!!r);return typeof n=="function"&&tv(t,".prototype.")>-1?Mc(n):n}});var Wc=m((nb,Bc)=>{Bc.exports=require("util").inspect});var Qc=m((ib,Hc)=>{var ti=typeof Map=="function"&&Map.prototype,ri=Object.getOwnPropertyDescriptor&&ti?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Sr=ti&&ri&&typeof ri.get=="function"?ri.get:null,rv=ti&&Map.prototype.forEach,ni=typeof Set=="function"&&Set.prototype,ii=Object.getOwnPropertyDescriptor&&ni?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,wr=ni&&ii&&typeof ii.get=="function"?ii.get:null,nv=ni&&Set.prototype.forEach,iv=typeof WeakMap=="function"&&WeakMap.prototype,ht=iv?WeakMap.prototype.has:null,ov=typeof WeakSet=="function"&&WeakSet.prototype,gt=ov?WeakSet.prototype.has:null,sv=typeof WeakRef=="function"&&WeakRef.prototype,Uc=sv?WeakRef.prototype.deref:null,av=Boolean.prototype.valueOf,uv=Object.prototype.toString,cv=Function.prototype.toString,lv=String.prototype.match,oi=typeof BigInt=="function"?BigInt.prototype.valueOf:null,si=Object.getOwnPropertySymbols,ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,vt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",fv=Object.prototype.propertyIsEnumerable,zc=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),ui=Wc().custom,ci=ui&&Vc(ui)?ui:null,B=typeof Symbol=="function"&&typeof Symbol.toStringTag!="undefined"?Symbol.toStringTag:null;Hc.exports=function e(t,r,n,i){var o=r||{};if(qe(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qe(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==Infinity:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=qe(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qe(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(typeof t=="undefined")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Yc(t,o);if(typeof t=="number")return t===0?Infinity/t>0?"0":"-0":String(t);if(typeof t=="bigint")return String(t)+"n";var a=typeof o.depth=="undefined"?5:o.depth;if(typeof n=="undefined"&&(n=0),n>=a&&a>0&&typeof t=="object")return li(t)?"[Array]":"[Object]";var u=Av(o,n);if(typeof i=="undefined")i=[];else if(Jc(i,t)>=0)return"[Circular]";function l(x,q,I){if(q&&(i=i.slice(),i.push(q)),I){var T={depth:o.depth};return qe(o,"quoteStyle")&&(T.quoteStyle=o.quoteStyle),e(x,T,n+1,i)}return e(x,o,n+1,i)}if(typeof t=="function"){var c=wv(t),d=br(t,l);return"[Function"+(c?": "+c:" (anonymous)")+"]"+(d.length>0?" { "+d.join(", ")+" }":"")}if(Vc(t)){var f=vt?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):ai.call(t);return typeof t=="object"&&!vt?St(f):f}if(Pv(t)){for(var p="<"+String(t.nodeName).toLowerCase(),y=t.attributes||[],h=0;h<y.length;h++)p+=" "+y[h].name+"="+Gc(dv(y[h].value),"double",o);return p+=">",t.childNodes&&t.childNodes.length&&(p+="..."),p+="</"+String(t.nodeName).toLowerCase()+">",p}if(li(t)){if(t.length===0)return"[]";var g=br(t,l);return u&&!Rv(g)?"["+di(g,u)+"]":"[ "+g.join(", ")+" ]"}if(mv(t)){var S=br(t,l);return S.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+S.join(", ")+" }"}if(typeof t=="object"&&s){if(ci&&typeof t[ci]=="function")return t[ci]();if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(bv(t)){var R=[];return rv.call(t,function(x,q){R.push(l(q,t,!0)+" => "+l(x,t))}),Kc("Map",Sr.call(t),R,u)}if(_v(t)){var A=[];return nv.call(t,function(x){A.push(l(x,t))}),Kc("Set",wr.call(t),A,u)}if(Ev(t))return fi("WeakMap");if(Ov(t))return fi("WeakSet");if(xv(t))return fi("WeakRef");if(gv(t))return St(l(Number(t)));if(Sv(t))return St(l(oi.call(t)));if(vv(t))return St(av.call(t));if(hv(t))return St(l(String(t)));if(!yv(t)&&!pv(t)){var j=br(t,l),O=zc?zc(t)===Object.prototype:t instanceof Object||t.constructor===Object,L=t instanceof Object?"":"null prototype",v=!O&&B&&Object(t)===t&&B in t?ve(t).slice(8,-1):L?"Object":"",E=O||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",w=E+(v||L?"["+[].concat(v||[],L||[]).join(": ")+"] ":"");return j.length===0?w+"{}":u?w+"{"+di(j,u)+"}":w+"{ "+j.join(", ")+" }"}return String(t)};function Gc(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function dv(e){return String(e).replace(/"/g,"&quot;")}function li(e){return ve(e)==="[object Array]"&&(!B||!(typeof e=="object"&&B in e))}function yv(e){return ve(e)==="[object Date]"&&(!B||!(typeof e=="object"&&B in e))}function pv(e){return ve(e)==="[object RegExp]"&&(!B||!(typeof e=="object"&&B in e))}function mv(e){return ve(e)==="[object Error]"&&(!B||!(typeof e=="object"&&B in e))}function hv(e){return ve(e)==="[object String]"&&(!B||!(typeof e=="object"&&B in e))}function gv(e){return ve(e)==="[object Number]"&&(!B||!(typeof e=="object"&&B in e))}function vv(e){return ve(e)==="[object Boolean]"&&(!B||!(typeof e=="object"&&B in e))}function Vc(e){if(vt)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!ai)return!1;try{return ai.call(e),!0}catch(t){}return!1}function Sv(e){if(!e||typeof e!="object"||!oi)return!1;try{return oi.call(e),!0}catch(t){}return!1}var qv=Object.prototype.hasOwnProperty||function(e){return e in this};function qe(e,t){return qv.call(e,t)}function ve(e){return uv.call(e)}function wv(e){if(e.name)return e.name;var t=lv.call(cv.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Jc(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function bv(e){if(!Sr||!e||typeof e!="object")return!1;try{Sr.call(e);try{wr.call(e)}catch(t){return!0}return e instanceof Map}catch(t){}return!1}function Ev(e){if(!ht||!e||typeof e!="object")return!1;try{ht.call(e,ht);try{gt.call(e,gt)}catch(t){return!0}return e instanceof WeakMap}catch(t){}return!1}function xv(e){if(!Uc||!e||typeof e!="object")return!1;try{return Uc.call(e),!0}catch(t){}return!1}function _v(e){if(!wr||!e||typeof e!="object")return!1;try{wr.call(e);try{Sr.call(e)}catch(t){return!0}return e instanceof Set}catch(t){}return!1}function Ov(e){if(!gt||!e||typeof e!="object")return!1;try{gt.call(e,gt);try{ht.call(e,ht)}catch(t){return!0}return e instanceof WeakSet}catch(t){}return!1}function Pv(e){return!e||typeof e!="object"?!1:typeof HTMLElement!="undefined"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Yc(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Yc(e.slice(0,t.maxStringLength),t)+n}var i=e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Tv);return Gc(i,"single",t)}function Tv(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function St(e){return"Object("+e+")"}function fi(e){return e+" { ? }"}function Kc(e,t,r,n){var i=n?di(r,n):r.join(", ");return e+" ("+t+") {"+i+"}"}function Rv(e){for(var t=0;t<e.length;t++)if(Jc(e[t],`
`)>=0)return!1;return!0}function Av(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=Array(e.indent+1).join(" ");else return null;return{base:r,prev:Array(t+1).join(r)}}function di(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+e.join(","+r)+`
`+t.prev}function br(e,t){var r=li(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=qe(e,i)?t(e[i],e):""}var o=typeof si=="function"?si(e):[],s;if(vt){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var u in e)!qe(e,u)||r&&String(Number(u))===u&&u<e.length||vt&&s["$"+u]instanceof Symbol||(/[^\w$]/.test(u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e)));if(typeof si=="function")for(var l=0;l<o.length;l++)fv.call(e,o[l])&&n.push("["+t(o[l])+"]: "+t(e[o[l]],e));return n}});var Zc=m((ob,Xc)=>{"use strict";var yi=gr(),We=$c(),Lv=Qc(),Nv=yi("%TypeError%"),Er=yi("%WeakMap%",!0),xr=yi("%Map%",!0),Iv=We("WeakMap.prototype.get",!0),kv=We("WeakMap.prototype.set",!0),Cv=We("WeakMap.prototype.has",!0),Fv=We("Map.prototype.get",!0),Dv=We("Map.prototype.set",!0),jv=We("Map.prototype.has",!0),pi=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},Mv=function(e,t){var r=pi(e,t);return r&&r.value},$v=function(e,t,r){var n=pi(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},Bv=function(e,t){return!!pi(e,t)};Xc.exports=function(){var t,r,n,i={assert:function(o){if(!i.has(o))throw new Nv("Side channel does not contain "+Lv(o))},get:function(o){if(Er&&o&&(typeof o=="object"||typeof o=="function")){if(t)return Iv(t,o)}else if(xr){if(r)return Fv(r,o)}else if(n)return Mv(n,o)},has:function(o){if(Er&&o&&(typeof o=="object"||typeof o=="function")){if(t)return Cv(t,o)}else if(xr){if(r)return jv(r,o)}else if(n)return Bv(n,o);return!1},set:function(o,s){Er&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Er),kv(t,o,s)):xr?(r||(r=new xr),Dv(r,o,s)):(n||(n={key:{},next:null}),$v(n,o,s))}};return i}});var _r=m((sb,el)=>{"use strict";var Wv=String.prototype.replace,Hv=/%20/g,mi={RFC1738:"RFC1738",RFC3986:"RFC3986"};el.exports={default:mi.RFC3986,formatters:{RFC1738:function(e){return Wv.call(e,Hv,"+")},RFC3986:function(e){return String(e)}},RFC1738:mi.RFC1738,RFC3986:mi.RFC3986}});var gi=m((ab,tl)=>{"use strict";var Uv=_r(),hi=Object.prototype.hasOwnProperty,Te=Array.isArray,ce=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),zv=function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(Te(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]!="undefined"&&i.push(n[o]);r.obj[r.prop]=i}}},rl=function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]!="undefined"&&(n[i]=t[i]);return n},Vv=function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(Te(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!hi.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return Te(t)&&!Te(r)&&(i=rl(t,n)),Te(t)&&Te(r)?(r.forEach(function(o,s){if(hi.call(t,s)){var a=t[s];a&&typeof a=="object"&&o&&typeof o=="object"?t[s]=e(a,o,n):t.push(o)}else t[s]=o}),t):Object.keys(r).reduce(function(o,s){var a=r[s];return hi.call(o,s)?o[s]=e(o[s],a,n):o[s]=a,o},i)},Gv=function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},Jv=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}},Yv=function(t,r,n,i,o){if(t.length===0)return t;var s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",u=0;u<s.length;++u){var l=s.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===Uv.RFC1738&&(l===40||l===41)){a+=s.charAt(u);continue}if(l<128){a=a+ce[l];continue}if(l<2048){a=a+(ce[192|l>>6]+ce[128|l&63]);continue}if(l<55296||l>=57344){a=a+(ce[224|l>>12]+ce[128|l>>6&63]+ce[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|s.charCodeAt(u)&1023),a+=ce[240|l>>18]+ce[128|l>>12&63]+ce[128|l>>6&63]+ce[128|l&63]}return a},Kv=function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],s=o.obj[o.prop],a=Object.keys(s),u=0;u<a.length;++u){var l=a[u],c=s[l];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(r.push({obj:s,prop:l}),n.push(c))}return zv(r),t},Qv=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},Xv=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},Zv=function(t,r){return[].concat(t,r)},e0=function(t,r){if(Te(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)};tl.exports={arrayToObject:rl,assign:Gv,combine:Zv,compact:Kv,decode:Jv,encode:Yv,isBuffer:Xv,isRegExp:Qv,maybeMap:e0,merge:Vv}});var ul=m((ub,nl)=>{"use strict";var il=Zc(),vi=gi(),wt=_r(),t0=Object.prototype.hasOwnProperty,ol={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},Le=Array.isArray,r0=Array.prototype.push,sl=function(e,t){r0.apply(e,Le(t)?t:[t])},n0=Date.prototype.toISOString,al=wt.default,W={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:vi.encode,encodeValuesOnly:!1,format:al,formatter:wt.formatters[al],indices:!1,serializeDate:function(t){return n0.call(t)},skipNulls:!1,strictNullHandling:!1},i0=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},o0=function e(t,r,n,i,o,s,a,u,l,c,d,f,p,y,h){var g=t;if(h.has(t))throw new RangeError("Cyclic object value");if(typeof a=="function"?g=a(r,g):g instanceof Date?g=c(g):n==="comma"&&Le(g)&&(g=vi.maybeMap(g,function(x){return x instanceof Date?c(x):x})),g===null){if(i)return s&&!p?s(r,W.encoder,y,"key",d):r;g=""}if(i0(g)||vi.isBuffer(g)){if(s){var S=p?r:s(r,W.encoder,y,"key",d);return[f(S)+"="+f(s(g,W.encoder,y,"value",d))]}return[f(r)+"="+f(String(g))]}var R=[];if(typeof g=="undefined")return R;var A;if(n==="comma"&&Le(g))A=[{value:g.length>0?g.join(",")||null:void 0}];else if(Le(a))A=a;else{var j=Object.keys(g);A=u?j.sort(u):j}for(var O=0;O<A.length;++O){var L=A[O],v=typeof L=="object"&&L.value!==void 0?L.value:g[L];if(!(o&&v===null)){var E=Le(g)?typeof n=="function"?n(r,L):r:r+(l?"."+L:"["+L+"]");h.set(t,!0);var w=il();sl(R,e(v,E,n,i,o,s,a,u,l,c,d,f,p,y,w))}}return R},s0=function(t){if(!t)return W;if(t.encoder!==null&&t.encoder!==void 0&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||W.charset;if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=wt.default;if(typeof t.format!="undefined"){if(!t0.call(wt.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=wt.formatters[n],o=W.filter;return(typeof t.filter=="function"||Le(t.filter))&&(o=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:W.addQueryPrefix,allowDots:typeof t.allowDots=="undefined"?W.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:W.charsetSentinel,delimiter:typeof t.delimiter=="undefined"?W.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:W.encode,encoder:typeof t.encoder=="function"?t.encoder:W.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:W.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:W.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:W.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:W.strictNullHandling}};nl.exports=function(e,t){var r=e,n=s0(t),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):Le(n.filter)&&(o=n.filter,i=o);var s=[];if(typeof r!="object"||r===null)return"";var a;t&&t.arrayFormat in ol?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var u=ol[a];i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=il(),c=0;c<i.length;++c){var d=i[c];n.skipNulls&&r[d]===null||sl(s,o0(r[d],d,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var f=s.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""}});var fl=m((cb,cl)=>{"use strict";var He=gi(),Si=Object.prototype.hasOwnProperty,a0=Array.isArray,k={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:He.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},u0=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},ll=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c0="utf8=%26%2310003%3B",l0="utf8=%E2%9C%93",f0=function(t,r){var n={},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=r.parameterLimit===Infinity?void 0:r.parameterLimit,s=i.split(r.delimiter,o),a=-1,u,l=r.charset;if(r.charsetSentinel)for(u=0;u<s.length;++u)s[u].indexOf("utf8=")===0&&(s[u]===l0?l="utf-8":s[u]===c0&&(l="iso-8859-1"),a=u,u=s.length);for(u=0;u<s.length;++u)if(u!==a){var c=s[u],d=c.indexOf("]="),f=d===-1?c.indexOf("="):d+1,p,y;f===-1?(p=r.decoder(c,k.decoder,l,"key"),y=r.strictNullHandling?null:""):(p=r.decoder(c.slice(0,f),k.decoder,l,"key"),y=He.maybeMap(ll(c.slice(f+1),r),function(h){return r.decoder(h,k.decoder,l,"value")})),y&&r.interpretNumericEntities&&l==="iso-8859-1"&&(y=u0(y)),c.indexOf("[]=")>-1&&(y=a0(y)?[y]:y),Si.call(n,p)?n[p]=He.combine(n[p],y):n[p]=y}return n},d0=function(e,t,r,n){for(var i=n?t:ll(t,r),o=e.length-1;o>=0;--o){var s,a=e[o];if(a==="[]"&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=parseInt(u,10);!r.parseArrays&&u===""?s={0:i}:!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(s=[],s[l]=i):s[u]=i}i=s}return i},y0=function(t,r,n,i){if(!!t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&s.exec(o),l=u?o.slice(0,u.index):o,c=[];if(l){if(!n.plainObjects&&Si.call(Object.prototype,l)&&!n.allowPrototypes)return;c.push(l)}for(var d=0;n.depth>0&&(u=a.exec(o))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&Si.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(u[1])}return u&&c.push("["+o.slice(u.index)+"]"),d0(c,r,n,i)}},p0=function(t){if(!t)return k;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset=="undefined"?k.charset:t.charset;return{allowDots:typeof t.allowDots=="undefined"?k.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:k.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:k.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:k.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:k.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:k.comma,decoder:typeof t.decoder=="function"?t.decoder:k.decoder,delimiter:typeof t.delimiter=="string"||He.isRegExp(t.delimiter)?t.delimiter:k.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:k.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:k.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:k.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:k.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:k.strictNullHandling}};cl.exports=function(e,t){var r=p0(t);if(e===""||e===null||typeof e=="undefined")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?f0(e,r):e,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),s=0;s<o.length;++s){var a=o[s],u=y0(a,n[a],r,typeof e=="string");i=He.merge(i,u,r)}return r.allowSparse===!0?i:He.compact(i)}});var yl=m((lb,dl)=>{"use strict";var m0=ul(),h0=fl(),g0=_r();dl.exports={formats:g0,parse:h0,stringify:m0}});var gl=m(wi=>{"use strict";var pl=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,v0=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,ml=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,S0=/\\([\u000b\u0020-\u00ff])/g,w0=/([\\"])/g,hl=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;wi.format=b0;wi.parse=E0;function b0(e){if(!e||typeof e!="object")throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!hl.test(r))throw new TypeError("invalid type");var n=r;if(t&&typeof t=="object")for(var i,o=Object.keys(t).sort(),s=0;s<o.length;s++){if(i=o[s],!ml.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+x0(t[i])}return n}function E0(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?_0(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var r=t.indexOf(";"),n=r!==-1?t.substr(0,r).trim():t.trim();if(!hl.test(n))throw new TypeError("invalid media type");var i=new O0(n.toLowerCase());if(r!==-1){var o,s,a;for(pl.lastIndex=r;s=pl.exec(t);){if(s.index!==r)throw new TypeError("invalid parameter format");r+=s[0].length,o=s[1].toLowerCase(),a=s[2],a[0]==='"'&&(a=a.substr(1,a.length-2).replace(S0,"$1")),i.parameters[o]=a}if(r!==t.length)throw new TypeError("invalid parameter format")}return i}function _0(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function x0(e){var t=String(e);if(ml.test(t))return t;if(t.length>0&&!v0.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(w0,"\\$1")+'"'}function O0(e){this.parameters=Object.create(null),this.type=e}});function bi(e){return typeof e=="string"}var vl=M(()=>{});var Sl,wl,P0,R0,bl,El=M(()=>{Sl=le(gl()),wl=le(require("zlib"));vl();P0=["application/atom_xml","application/javascript","application/json","application/rss+xml","application/vnd.ms-fontobject","application/x-font-opentype","application/x-font-ttf","application/x-javascript","application/xhtml+xml","application/xml","application/xml+rss","font/eot","font/opentype","font/otf","image/svg+xml","image/x-icon","text/css","text/html","text/javascript","text/js","text/plain"],R0=(e,t)=>{let r=e.getHeader("content-type");if(r=bi(r)?[r]:r,!r||!P0.includes((0,Sl.parse)(r[0]).type.toLowerCase()))return;let n=(0,wl.gzipSync)(Buffer.from(t.body));e.setHeader("content-length",Buffer.byteLength(n)),e.setHeader("content-encoding","gzip"),t.body=n},bl=R0});var _l=m((mb,xl)=>{xl.exports={name:"@layer0/core",version:"3.17.3",main:"./index.js",license:"UNLICENSED",scripts:{docs:"typedoc",build:"rm -rf ./dist; mkdir ./dist; cp -r package.json README.md serverless.yml default-app ./dist; tsc; npm run bundle-handler;","bundle-handler":"esbuild src/lambda/handler.ts --bundle --minify --platform=node --target=node14.0 --outfile=dist/lambda/handler.js --log-level=error --sourcemap",watch:"npm-watch","ts:watch":"tsc --watch","push-build":"npm run build && cd dist && yalc push && cd ..",release:"cd ./dist; npm publish --access public","release:next":"npm run release -- --tag next",test:"jest --watchAll=false --runInBand --forceExit"},dependencies:{"@babel/parser":"^7.13.15","@babel/traverse":"^7.13.15","@types/lodash.clonedeep":"^4.5.6",ajv:"^6.12.6","babel-loader":"^8.2.2",chalk:"^2.4.2",chokidar:"^3.5.1","cls-hooked":"^4.2.2","content-type":"^1.0.4",cookie:"^0.4.1","cross-spawn":"^7.0.3","decode-uri-component":"^0.2.0",deepmerge:"^4.2.2",esbuild:"^0.11.15",express:"^4.17.1","fs-extra":"^8.1.0",globby:"^11.0.2","http-proxy":"^1.18.1","lodash.clonedeep":"^4.5.0","lru-cache":"^6.0.0","mime-types":"^2.1.29","node-fetch":"^2.6.1","path-to-regexp":"^6.2.0",pino:"^6.11.2",qs:"^6.10.1","resolve-package-path":"^2.0.0",shelljs:"^0.8.4",slash:"^3.0.0","tcp-port-used":"^1.0.2","ts-loader":"^8.2.0",unixify:"^1.0.0",uuid:"^8.3.2"},publishConfig:{directory:"dist"},watch:{"push-build":{patterns:["src","bin","serverless.yml","default-app","package.json"],extensions:["js","ts"],quiet:!1}},jest:{clearMocks:!0,collectCoverage:!0,transform:{"^.+\\.(js)?$":"babel-jest","^.+\\.ts$":"ts-jest"},moduleFileExtensions:["ts","js","json"],setupFilesAfterEnv:["<rootDir>/test/jest.js"],transformIgnorePatterns:["<rootDir>/node_modules/"],moduleNameMapper:{"../package.json":"<rootDir>/package.json","^@layer0/core(.*)$":"<rootDir>/src/$1"},collectCoverageFrom:["./src/**/*.{ts,js}","!**/mocks/**","!**/index.ts","!**/plugins/PluginBase.ts","!**/bin/**/*"]},devDependencies:{"@types/cls-hooked":"^4.3.1","@types/content-type":"^1.1.3","@types/cookie":"^0.3.3","@types/cross-spawn":"^6.0.2","@types/decode-uri-component":"^0.2.0","@types/express":"^4.17.7","@types/fs-extra":"^8.1.1","@types/http-proxy":"^1.17.4","@types/lodash":"^4.14.162","@types/lru-cache":"^5.1.0","@types/mime-types":"^2.1.0","@types/node":"^14.6.4","@types/route-parser":"^0.1.3","@types/shelljs":"^0.8.8","@types/tcp-port-used":"^1.0.0","@types/unixify":"^1.0.0","@types/uuid":"^8.0.1","@types/webpack-bundle-analyzer":"^3.9.0",lodash:"^4.17.21",webpack:"^5.27.0","webpack-bundle-analyzer":"^3.9.0","webpack-dev-middleware":"^4.1.0"}}});function A0(){return process.env[Jt.versionOverride]||_l().version}function q0(e){xi(e,U.x0Status,`w=${e.statusCode}`)}function T0(e,t){let r=t.lambda;xi(e,U.x0T,`wt=${t.duration},wc=${r.invocationCounter},wa=${r.age},wl=${r.lifetimeDuration}`)}function L0(e,t,r){xi(e,U.x0Components,`w=${t},wi=${r}`)}function xi(e,t,r){let n=e.multiValueHeaders[t];n?Array.isArray(n)?n[0]=`${r},${n[0]}`:e.multiValueHeaders[t]=`${r},${n}`:e.multiValueHeaders[t]=`${r}`}var Or,Ei,Ol,Pl=M(()=>{Or=le(yl());Ir();Ke();El();Ei=le(require("stream"));Ol=(e,t)=>{let r={body:Buffer.from(""),isBase64Encoded:!0,statusCode:200,statusMessage:"OK",multiValueHeaders:{}},n,i=new Ei.default.Readable;if(i.url=e.path,i.path=e.path,i.query={},i.method=e.httpMethod,i.rawHeaders=[],i.headers={},e.multiValueQueryStringParameters&&Object.keys(e.multiValueQueryStringParameters).length){Object.keys(e.multiValueQueryStringParameters).forEach(d=>{let f=e.multiValueQueryStringParameters[d];Array.isArray(f)&&f.length===1&&(e.multiValueQueryStringParameters[d]=f[0])});let c=(0,Or.stringify)(e.multiValueQueryStringParameters);i.url+=`?${c}`,i.query=(0,Or.parse)(c)}let o=e.multiValueHeaders||{};for(let c of Object.keys(o)){for(let d of o[c])i.rawHeaders.push(c),i.rawHeaders.push(d);i.headers[c.toLowerCase()]=o[c].toString()}i.getHeader=c=>i.headers[c.toLowerCase()],i.getHeaders=()=>i.headers,i.connection={},i.secure=i.getHeader(U.x0Protocol)!=="http",i.socket={encrypted:i.secure},i.connection={encrypted:i.secure},i.protocol=i.secure?"https":"http";let s;i.headers[U.xRequestId]||(s=Ft(),i.headers[U.xRequestId]=s);let a=new Ei.default;Object.defineProperty(a,"statusCode",{get(){return r.statusCode},set(c){r.statusCode=c}}),Object.defineProperty(a,"statusMessage",{get(){return r.statusMessage},set(c){r.statusMessage=c}}),a.headers={},a.writeHead=(c,d,f)=>{r.statusCode=c,typeof d=="string"?r.statusMessage=d:typeof d=="object"&&(f=d,d=void 0),typeof f=="object"&&Object.entries(f).forEach(([p,y])=>{a.setHeader(p,y)}),s&&a.setHeader(U.xRequestId,s)},a.write=c=>{r.body=Buffer.concat([r.body,Buffer.isBuffer(c)?c:Buffer.from(c)])},a.setHeader=(c,d)=>{a.headers[c.toLowerCase()]=d},a.removeHeader=c=>{delete a.headers[c.toLowerCase()]},a.getHeader=c=>a.headers[c.toLowerCase()],a.getHeaders=()=>a.headers;let u=c=>d=>{d&&a.write(d),(i.getHeader(U.acceptEncoding)||"").split(",").includes("gzip")&&a.getHeader(U.contentEncoding)==null&&bl(a,r),r.body=r.body.toString("base64"),r.multiValueHeaders=a.headers,t.stop(),q0(r),T0(r,t),L0(r,A0(),t.lambda.id),l(),c(r)};n=new Promise(c=>{a.end=u(c)}),e.body&&(i.push(e.body,e.isBase64Encoded?"base64":void 0),i._rawBodyBase64=e.body),i.push(null);function l(){for(let c of Object.keys(r.multiValueHeaders))Array.isArray(r.multiValueHeaders[c])||(r.multiValueHeaders[c]=[r.multiValueHeaders[c]])}return{req:i,res:a,responsePromise:n}}});var Rl={};Ne(Rl,{handler:()=>I0});async function I0(e,t){let r=new Dt(t);switch(r.start(),e.action){case"getEdgeConfig":return bt.createEdgeConfig();case"getPreloadConfig":return _i(()=>bt.createPreloadConfig())}let n,i,o;try{let s=Ol(e,r);n=s.req,i=s.res,o=s.responsePromise}catch(s){return _i(()=>(console.log("Failed to parse the event to get request and response data:",s.message,s.stackTrace),{body:Buffer.from('{"error":"Failed to parse the event to get request and response data"}'),isBase64Encoded:!0,statusCode:530,statusMessage:"Internal Layer0 Error",multiValueHeaders:{}}))}return await _i(async()=>{let s=n.headers||{};wn(C({method:n.method,path:n.url,host:s.host,headers:s,protocol:`${s["x-0-protocol"]||"https"}:`},Xe(n._rawBodyBase64,n.headers)));try{await N0(3001)}catch(a){throw console.error(a),a}return dc(()=>bt.run(n,i))(),o.then(a=>{let u=i.headers||{};return bn(C({statusCode:i.statusCode,statusMessage:i.statusMessage,headers:u},Xe(a.body,i.headers))),a})},n)}async function k0(e){let t=(0,ql.join)(process.cwd(),ic(Yt.js));if((0,Al.existsSync)(t)){let r=Pe(t);r.default&&(r=r.default),await r(e),bt.setBackend(Yt.js,{domainOrIp:qs,port:e}),bt.setBackend(Yt.imageOptimizer,{domainOrIp:process.env.LAYER0_IMAGE_OPTIMIZER_HOST,port:process.env.LAYER0_IMAGE_OPTIMIZER_PORT})}}async function N0(e){return Oi||(Oi=k0(e)),Oi}function C0(e){(process.env.LAYER0_LOCAL!=="true"||process.env.LAYER0_LOCAL_CONSOLE_WRAP==="true")&&Xt.enable({clientIp:e&&e.headers[U.x0ClientIp],requestId:e&&e.headers[U.xRequestId]})}function F0(){Xt.disable()}async function _i(e,t){try{return C0(t),await e()}finally{F0()}}var Al,ql,bt,Oi,Tl=M(()=>{Ke();Al=le(nc()),ql=le(require("path"));oc();mc();hc();dr();Pl();En();_n();Cr();bt=Kn("./routes")});qi(exports);Ne(exports,{handler:()=>W0});var{default:D0}=(Cr(),Ji),j0=new D0,{enableRequestLogging:M0,disableRequestLogging:$0}=zs();async function W0(e){return process.env.LAYER0_HTTP_REQUEST_LOGGING==="1"?M0():$0(),B0(process.env),(async()=>{let{handler:t}=(Tl(),Rl);return await t(e,j0)})()}var B0=e=>{Object.keys(e).forEach(t=>{t.startsWith("AWS")&&delete process.env[t]})};0&&(module.exports={handler});
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
//# sourceMappingURL=handler.js.map
